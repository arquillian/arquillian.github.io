<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Erste Schritte &#183; Arquillian Guides</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="Lerne, wie Du die Arquillian-Testsuite zu Deinem Projekt hinzufügst und die ersten Arquillian-Tests schreibst." name="description" />
    <link href="/blog/atom.xml" rel="alternate" title="Arquillian blog Atom feed" type="application/atom+xml" />
    <link href="/stylesheets/screen.css?b52ff7178db0becf75d043579212b77c1f982da3" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/r29/html5.js"></script>
    <![endif]-->
    <link href="/favicon.ico" rel="shortcut icon" />
  </head>
  <body class="guide">
    <header class="navbar navbar-fixed-top" id="banner" role="banner">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <div class="g-plusone-slot">
            <div class="g-plusone" data-annotation="none"></div>
          </div>
          <a class="brand" href="/">
            <span class="logo"></span>
            <span class="name">Arquillian</span>
          </a>
          <nav class="nav-collapse" role="navigation">
            <ul class="nav">
              <li><a href="/invasion/">Invasion!</a></li>
              <li><a href="/features/">Features</a></li>
              <li class="active"><a href="/guides/">Guides</a></li>
              <li><a href="/docs/">Docs</a></li>
              <li><a href="/blog/">Blog</a></li>
              <li><a href="/community/">Community</a></li>
              <li><a href="/modules/">Modules</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </header>
    <div id="main" role="main">
      <div id="content-header">
        <div class="container">
          <div class="headline">
            <h1>
              <a href="/guides/">Arquillian Guides</a>
              <small>Designed exclusively to teach you how to use Arquillian to write real tests.</small>
            </h1>
            <div class="directory">
              <a class="guides_menu" href="./" id="guides_menu">
                Guides Index
                <i class="icon-menu-closed"></i>
              </a>
              <div id="guides" style="display: none">
                <a class="guides_menu" href="./">
                  Guides Index
                  <i class="icon-menu-open"></i>
                </a>
                <hr class="clear" />
                <dl class="beg">
                  <dt>First Steps</dt>
                  <dd><a href="/guides/getting_started/">Getting Started</a>
                  <br />
                  <a href="/guides/getting_started/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/getting_started_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/getting_started_el_gr/"><img class="flag" rel="tooltip" src="/images/flags/el_gr.png" title="Ελληνικά (el_gr)" /></a>
                  <a href="/guides/getting_started_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/getting_started_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/getting_started_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/getting_started_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/getting_started_nl/"><img class="flag" rel="tooltip" src="/images/flags/nl.png" title="Nederlands (nl)" /></a>
                  <a href="/guides/getting_started_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/getting_started_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/getting_started_sk/"><img class="flag" rel="tooltip" src="/images/flags/sk.png" title="Slovenčina (sk)" /></a>
                  <a href="/guides/getting_started_sv_se/"><img class="flag" rel="tooltip" src="/images/flags/sv_se.png" title="Svenska (sv_se)" /></a>
                  <a href="/guides/getting_started_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/getting_started_rinse_and_repeat/">Getting Started: Rinse and Repeat</a>
                  <br />
                  <a href="/guides/getting_started_rinse_and_repeat/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/get_started_faster_with_forge/">Get Started Faster with Forge</a></dd>
                  <dd><a href="/guides/shrinkwrap_introduction/">Creating Deployable Archives with ShrinkWrap</a>
                  <br />
                  <a href="/guides/shrinkwrap_introduction/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/shrinkwrap_introduction_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/shrinkwrap_introduction_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/shrinkwrap_introduction_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/shrinkwrap_introduction_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/shrinkwrap_introduction_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/shrinkwrap_introduction_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/shrinkwrap_introduction_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                </dl>
                <dl class="int">
                  <dt>More Coverage</dt>
                  <dd><a href="/guides/testing_java_persistence/">Testing Java Persistence</a>
                  <br />
                  <a href="/guides/testing_java_persistence/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/testing_java_persistence_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/testing_java_persistence_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/testing_java_persistence_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/testing_java_persistence_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/testing_java_persistence_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/functional_testing_using_graphene/">Functional Testing using Drone and Graphene</a></dd>
                  <dd><a href="/guides/testing_in_the_cloud/">Testing in the Cloud</a></dd>
                </dl>
                <dl class="adv">
                  <dt>Enhance</dt>
                  <dd><a href="/guides/developing_a_container_adapter/">Developing a Container Adapter</a></dd>
                </dl>
                <dl class="ref">
                  <dt>Reference</dt>
                  <dd><a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Reference Guide</a></dd>
                  <dd><a href="http://docs.jboss.org/arquillian/aggregate/latest">API &amp; SPI Docs</a></dd>
                  <dd><a href="http://community.jboss.org/wiki/ArquillianMigrationGuides">Migration Guides</a></dd>
                  <dd><a href="http://community.jboss.org/en/arquillian/faq">FAQs</a></dd>
                </dl>
              </div>
            </div>
            <script>$(function() { activateGuideMenuControl() })</script>
          </div>
        </div>
      </div>
      <div class="container" id="guide">
        <div id="content" lang="de">
            <div class="header">
            <div class="titlebar">
            <h2>Erste Schritte</h2>
            <div class="btn-group">
              <a class="btn" href="https://github.com/arquillian/arquillian.github.io/edit/develop/guides/getting_started_de.textile">Edit this file</a>
            </div>
          </div>
            <div class="authors"><strong>Author:</strong>
          <a href="/community/mojavelinux">Dan Allen</a>  <strong style="padding-left: 10px;">Translators:</strong>
          <a href="/community/myfear">Markus Eisele</a>, <a href="/community/bennetelli">Bennet Schulz</a>  <strong style="padding-left: 10px;">Language:</strong>
          <img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" />
          <br />
          <strong style="padding-left: 0px;">Tags:</strong>
          cdi, weld, maven, forge, eclipse  <strong style="padding-left: 10px;">Last Update:</strong>Jul 12, 2017</div>
            <p>Dieser Guide stellt Arquillian vor. Nach dem Lesen dieses Guides kannst Du:</p>
            <ul>
          	<li>Arquillian zu einem Maven-basierten Projekt hinzufügen</li>
          	<li>einen Arquillian-Testfall schreiben, der das Verhalten eines CDI- (Context and Dependency Injection) Beans überprüft.</li>
          	<li>den Arquillian-Testfall in verschiedenen Containern ausführen.</li>
          </ul>
            <p>Du wirst all dies lernen, indem du Arquillian als Testsuite zu einem Java-EE-basierten Maven-Projekt hinzufügst. Wir haben diesen Guide so entworfen, dass du ihn schnell durcharbeiten und sofort starten kannst!</p>
            </div>
            <h3 id="annahmen">Annahmen</h3>
          <p>Der einfachste Weg mit Arquillian anzufangen ist, wenn man es in ein Projekt integriert, welches bereits Abhängigkeitsmanagement (Dependency Management) unterstützt. Das am weitesten Verbreitete Werkzeug dieser Kategorie heutzutage ist <a href="http://maven.apache.org">Apache Maven</a>. Dieser Guide führt Dich zu Deiner ersten <strong class="greenbar">green bar</strong> (grüner Testbalken) mithilfe eines Beispiel-Maven-Projekts.</p>
          <p class="info"><span>Arquillian basiert nicht auf Maven oder irgendeinem anderen Build-Tool. Es funktioniert genauso gut &#8212; wenn nicht besser <del>- wenn es in einem Projekt verwendet wird, welches einen Ant</del> oder Gradle-Build einsetzt. Idealerweise sollte das Build-Werkzeug allerdings Dependency Management anbieten, da es die Integration der Arquillian-Bibliotheken deutlich vereinfacht, weil diese bereits im <a href="http://search.maven.org">Maven Central repository</a> vorliegen.</span></p>
          <p>Dieser Guide setzt voraus, dass bei Dir Maven installiert ist: Entweder als Kommandozeilenwerkzeug oder in Deiner IDE (Integrated Development Environment). Wenn nicht, bitte <a href="http://maven.apache.org/download.html">installiere Maven jetzt</a>. Du wirst auch ein <a href="http://www.oracle.com/technetwork/java/javase/downloads" title="Java Development Kit">JDK</a> auf Deinem Rechner benötigen.</p>
          <h3 id="erstelle_ein_neues_projekt">Erstelle ein neues Projekt</h3>
          <p>Es gibt zwei von uns empfohlene Wege ein neues Maven-Projekt zu erstellen:</p>
          <ol>
          	<li><a href="#generate_project_from_archetype">Erstelle ein Projekt von einem Maven-Archetype</a></li>
          	<li><a href="#create_project_using_forge">Erstelle und passe ein Projekt mit JBoss Forge an</a></li>
          </ol>
          <p>Die Verwendung von <a href="http://jboss.org/forge">JBoss Forge</a> stellt den mit Abstand einfacheren Weg dar. Dieser Guide bietet dir allerdings beide Alternativen an, für den Fall, dass du noch nicht bereit bist JBoss Forge einzusetzen. Wähle eine der obigen Optionen, um zur jeweiligen Anleitung zu springen.</p>
          <p class="info"><span>Wenn Du bereits ein Maven-basiertes Projekt hast, kannst Du diese Sektion als Referenz verwenden, um sicherzustellen, dass Du die richtigen Abhängigkeiten im Projekt hast, bevor Du weitermachst.</span></p>
          <h4 id="generate_project_from_archetype">Erstelle ein Projekt von einem Maven-Archetype aus</h4>
          <p>Zuerst erstelle ein Maven-basiertes Java-Projekt mithilfe der Kommandozeile unten.</p>
          <pre class="command"><code class="command">$ mvn archetype:generate -DarchetypeGroupId=net.avh4.mvn.archetype \&#x000A;-DarchetypeArtifactId=java-1.6-archetype</code></pre>
          <p>Kopiere den Text nach dem <code>$</code> und füge ihn in deine Kommandozeilen-Fenster ein. Füge, wenn Du dazu aufgefordert wirst, die in der folgen Liste stehenden Werte ein und bestätige sie mit <code>&lt;ENTER&gt;</code>.</p>
          <pre class="output"><code class="output">Define value for property 'groupId': : org.arquillian.example &lt;ENTER&gt;&#x000A;Define value for property 'artifactId': : arquillian-tutorial &lt;ENTER&gt;&#x000A;Define value for property 'version': : &lt;ENTER&gt;&#x000A;Define value for property 'package': : &lt;ENTER&gt;&#x000A;Confirm properties configuration:&#x000A;groupId: org.arquillian.example&#x000A;artifactId: arquillian-tutorial&#x000A;version: 1.0-SNAPSHOT&#x000A;package: org.arquillian.example&#x000A;Y: : &lt;ENTER&gt;</code></pre>
          <p>Dieses Kommando erzeugt ein Maven-basiertes Java-Projekt innerhalb eines Verzeichnisses mit dem Namen <code>arquillian-tutorial</code> unterhalb des aktuellen Verzeichnisses. Die Dateistruktur des Projekt ist wie folgt:</p>
          <ul class="Dateibaum">
          	<li>src/
          	<ul>
          		<li>main/
          		<ul>
          			<li>java/ &#8211; Hier kommen alle Java-Sourcedateien hin (in Java-Packages)</li>
          			<li>resources/ &#8211; Hier kommen alle Konfigurationsdateien der Anwendung hin.</li>
          		</ul></li>
          		<li>test/
          		<ul>
          			<li>java/ &#8211; Hier kommen alle Test-Java-Sourcedateien hin (in Java-Packages)</li>
          			<li>resources/ &#8211; Hier kommen alle Konfigurationsdateien für die Tests hin (beispielsweise: arquillian.xml)</li>
          		</ul></li>
          	</ul></li>
          	<li>pom.xml &#8211; Die Maven-Builddatei, welche Maven sagt, wie das Projekt zu bauen ist.</li>
          </ul>
          <p class="info"><span>Das erzeugte Projekt ist mit Java 1.6 und JUnit 4.8 vorkonfiguriert. Dies sind die im Minimum benötigten Versionen von Java und JUnit, um Arquillian zu nutzen.</span></p>
          <p>Der Generator hat auch ein Java-Package mit dem Namen <code>org.arquillian.example</code> unterhalb der beiden <code>java</code>-Verzeichnisse erstellt. Dorthin solltest Du auch Deine Java-Sourcen packen und nicht direkt in das Root der <code>java</code>-Verzeichnisse.</p>
          <p class="warning"><span>Arquillian unterstützt auch TestNG 5. Dennoch verwendet dieser Guide JUnit als Beispiel.</span></p>
          <p>Öffnet als nächstes das <code>pom.xml</code> in Deiner IDE oder einem Editor. Du solltest eine XML-Datei mit den Basisprjektiformationen, einer <code>&lt;build&gt;</code>-und einer <code>&lt;dependencies&gt;</code>-Section sehen. <strong>Du kannst alle <code>&lt;dependency&gt;</code>-Elemente unterhalb der JUnit-Abhängigkeit entfernen. Sie werden nicht benötigt.</strong></p>
          <p>Wenn Du fertig bist, sollte das Ergebnis ungefähr so aussehen (abgekürzt zur besseren Lesbarkeit):</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#x000A;&lt;project xmlns="http://maven.apache.org/POM/4.0.0"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://maven.apache.org/POM/4.0.0&#x000A;        http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;&#x000A;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</code>&#x000A;&#x000A;<code class="prettify">    &lt;groupId&gt;org.arquillian.example&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;arquillian-tutorial&lt;/artifactId&gt;&#x000A;    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;&#x000A;    &lt;packaging&gt;jar&lt;/packaging&gt;</code>&#x000A;&#x000A;<code class="prettify">    &lt;name&gt;arquillian-tutorial&lt;/name&gt;&#x000A;    &lt;url&gt;http://arquillian.org&lt;/url&gt;</code>&#x000A;&#x000A;<code class="prettify">    &lt;properties&gt;&#x000A;        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;&#x000A;    &lt;/properties&gt;</code>&#x000A;&#x000A;<code class="prettify">    &lt;build&gt;&#x000A;        &lt;plugins&gt;&#x000A;            &lt;plugin&gt;&#x000A;                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#x000A;                &lt;version&gt;2.3.2&lt;/version&gt;&#x000A;                &lt;configuration&gt;&#x000A;                    &lt;source&gt;1.6&lt;/source&gt;&#x000A;                    &lt;target&gt;1.6&lt;/target&gt;&#x000A;                &lt;/configuration&gt;&#x000A;            &lt;/plugin&gt;&#x000A;        &lt;/plugins&gt;&#x000A;    &lt;/build&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;            &lt;version&gt;4.12&lt;/version&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/project&gt;</code></pre>
          <p>Wir werden Java-EE-7-Komponenten schreiben. Daher benötigst Du außerdem die Java-EE-7-API als abhängige Bibliothek im Classpath, um diese kompilieren zu können.</p>
          <p>Öffne erneut die <code>pom.xml</code>-Datei und füge das folgende XML-Fragment direkt innerhalb der umschließenden <code>&lt;dependencies&gt;</code>-Elemente ein. Das sollte dann so aussehen, wenn Du fertig bist:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependencies&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;        &lt;version&gt;1.0.3.Final&lt;/version&gt;&#x000A;        &lt;type&gt;pom&lt;/type&gt;&#x000A;        &lt;scope&gt;provided&lt;/scope&gt;&#x000A;    &lt;/dependency&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;        &lt;version&gt;4.12&lt;/version&gt;&#x000A;        &lt;scope&gt;test&lt;/scope&gt;&#x000A;    &lt;/dependency&gt;&#x000A;&lt;/dependencies&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>Die Grundlagen für Dein Projekt sind jetzt fertig! Überspringe den nächsten Abschnitt und gehe direkt zu <a href="#open_project_in_eclipse">Projekt in Eclipse öffnen</a>, damit wir endlich Code schreiben können!</p>
          <h4 id="create_project_using_forge">Erstelle und passe ein Projekt mit JBoss Forge an</h4>
          <p><a href="http://jboss.org/forge">JBoss Forge</a> ist ein Kommandozeilenwerkzeug zum Rapid Application Development in einer auf Standards basierenden Umgebung. Gerne auch als &#8220;Maven Archetypes on steroids&#8221; bezeichnet.</p>
          <p>Forge ist schnell installiert und dieser Guide führt Dich durch die Grundlagen. Folge einfach diesen einfachen Schritten, um es zu installieren:</p>
          <ol>
          	<li><a href="http://downloads.jboss.org/forge/releases/3.4.0.Final/forge-distribution-3.4.0.Final-offline.zip">Download Forge</a> und packe Forge in ein beliebiges Verzeichnis auf Deiner Festplatte aus. Diese nennen wir <code>$FORGE_HOME</code><br />
          Wir gehen davon aus, dass Du die Distribution in ein Verzeichnis mit dem Namen <code>forge</code> in Deinem Home-Verzeichnis ausgepackt hast.</li>
          </ol>
          <ol>
          	<li>Füge <code>$FORGE_HOME/bin</code> zu Deinem Pfad hinzu (Windows, Linux oder Mac OSX)</li>
          </ol>
          <p>Auf Unix-basierenden Systemen bedeutet dies, dass Du $HOME/.bashrc or $HOME/.profile editieren musst. Eine entsprechende Ergänzung sieht dann beispielsweise so aus:</p>
          <pre class="command"><code class="command">$ export FORGE_HOME=$HOME/forge/&#x000A;$ export PATH=$PATH:$FORGE_HOME/bin</code></pre>
          <p class="info"><span>Unter Windows kann dies über die Systemeigenschaften eingestellt werden. Dorthin gelangst Du mit einem Rechtsklick auf die &#8220;Systemsteuerung&#8221;, dann Klick auf &#8220;Systemeigenschaften&#8221;, dort der Reiter &#8220;Erweitert&#8221;. Ein Klick auf &#8220;Umgebungsvariablen&#8221; ermöglicht das Hinzufügen der beiden Einträge. Es wird empfohlen die Einträge als Nutzervariablen vorzunehmen. Systemvariablen ist nur sinnvoll, wenn Forge in einem Verzeichnis installiert ist, welches von allen Systembenutzern gelesen werden kann.</span></p>
          <p>Nachdem Forge installiert (bzw. entpackt) wurde, öffne die Kommandozeile und führe das folgende <code>forge</code>-Kommando aus:</p>
          <pre class="command"><code class="command">$ forge&#x000A;   _____&#x000A;  |  ___|__  _ __ __ _  ___&#x000A;  | |_ / _ \| `__/ _` |/ _ \  \\&#x000A;  |  _| (_) | | | (_| |  __/  //&#x000A;  |_|  \___/|_|  \__, |\___|&#x000A;                  |___/</code>&#x000A;&#x000A;<code class="command">[no project] ~ $</code></pre>
          <p>Das war es schon! Forge läuft und es wird Zeit, das Projekt zu erstellen.</p>
          <p>Tippe das folgende Kommando innerhalb der Forge-Shell. Es erzeugt ein leeres Projekt in etwa der Art, wie es der Maven-Archetype auch getan hat:</p>
          <pre class="command"><code class="command">$ project-new --named arquillian-tutorial --topLevelPackage org.arquillian.example</code></pre>
          <p>Dieses Kommando erzeugt ein Maven-basiertes Java-Projekt innerhalb eines <code>arquillian-tutorial</code> genannten Verzeichnisses direkt unterhalb des aktuellen Verzeichnisses.</p>
          <p>Die Dateistruktur ist dabei wie folgt erzeugt worden:</p>
          <ul class="Dateibaum">
          	<li>src/
          	<ul>
          		<li>main/
          		<ul>
          			<li>java/ &#8211; Hier kommen alle Java-Sourcedateien hin (in Java-Packages)</li>
          			<li>resources/ &#8211; Hier kommen alle Konfigurationsdateien der Anwendung hin.
          			<ul>
          				<li>META-INF/
          				<ul>
          					<li>forge.xml &#8211; Eine leere Forge Settings Datei</li>
          				</ul></li>
          			</ul></li>
          		</ul></li>
          		<li>test/
          		<ul>
          			<li>java/ &#8211; Hier kommen alle Test-Java-Source-Dateien hin (in Java-Packages)</li>
          			<li>resources/ &#8211; Hier kommen alle Konfigurationsdateien für die Tests hin (beispielsweise: arquillian.xml)</li>
          		</ul></li>
          	</ul></li>
          	<li>pom.xml &#8211; Die Maven-Builddatei, welche Maven sagt, wie das Projekt zu bauen ist.</li>
          </ul>
          <p>Forge wechselt automatisch in das erstellte Projektverzeichnis.</p>
          <pre class="command"><code class="command">[arquillian-tutorial] arquillian-tutorial $</code></pre>
          <p>Nun müssen die Java-EE-APIs hinzugefügt werden. Das wird mit dem <code>project-add-dependency</code>-Kommando gemacht:</p>
          <pre class="command"><code class="command">$ project-add-dependencies org.jboss.spec:jboss-javaee-7.0:1.0.3.Final:pom:provided</code></pre>
          <p>Dann fehlt noch JUnit 4.12 für die Tests, als weitere Minimalanforderung von Arquillian.</p>
          <pre class="command"><code class="command">$ project-add-dependencies junit:junit:4.12:test</code></pre>
          <p>Im Ergebnis sieht die von Forge erzeugte pom.xml dann so aus:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#x000A;&lt;project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;&#x000A;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#x000A;    &lt;groupId&gt;org.arquillian.tutorial&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;arquillian-tutorial&lt;/artifactId&gt;&#x000A;    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;&#x000A;    &lt;packaging&gt;war&lt;/packaging&gt;&#x000A;    &lt;properties&gt;&#x000A;    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;&#x000A;    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;&#x000A;    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;&#x000A;    &lt;/properties&gt;&#x000A;    &lt;dependencyManagement&gt;&#x000A;      &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;          &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;          &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;          &lt;version&gt;1.0.3.Final&lt;/version&gt;&#x000A;          &lt;type&gt;pom&lt;/type&gt;&#x000A;          &lt;scope&gt;provided&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;          &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;          &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;          &lt;version&gt;4.12&lt;/version&gt;&#x000A;          &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;      &lt;/dependencies&gt;&#x000A;    &lt;/dependencyManagement&gt;&#x000A;    &lt;dependencies&gt;&#x000A;      &lt;dependency&gt;&#x000A;        &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;        &lt;type&gt;pom&lt;/type&gt;&#x000A;        &lt;scope&gt;provided&lt;/scope&gt;&#x000A;      &lt;/dependency&gt;&#x000A;      &lt;dependency&gt;&#x000A;        &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;        &lt;scope&gt;test&lt;/scope&gt;&#x000A;      &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;    &lt;build&gt;&#x000A;      &lt;finalName&gt;arquillian-tutorial&lt;/finalName&gt;&#x000A;      &lt;plugins&gt;&#x000A;        &lt;plugin&gt;&#x000A;          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;&#x000A;          &lt;version&gt;2.4&lt;/version&gt;&#x000A;          &lt;configuration&gt;&#x000A;            &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;&#x000A;          &lt;/configuration&gt;&#x000A;        &lt;/plugin&gt;&#x000A;      &lt;/plugins&gt;&#x000A;    &lt;/build&gt;&#x000A;&lt;/project&gt;</code></pre>
          <p class="info"><span>Arquillian kann über das Maven Central Repository bezogen werden. Daher ist der Verweis auf das JBoss Public Repository in der pom.xml überflüssig und kann entfernt werden. Behalte aber im Hinterkopf, dass es durchaus abhängige Bibliotheken von JBoss gibt, welche nicht über Maven Central bezogen werden können.</span></p>
          <p class="warning"><span>Wenn Du zu den Anhängern gehörst, welche das Hinzufügen von Repositories in Projekt pom.xml für ein Anti-Pattern halten, dann lies <a href="http://community.jboss.org/wiki/MavenGettingStarted-Users">diese Anweisungen</a>, um die Repositories global in der Maven-settings.xml-Datei einzustellen.</span></p>
          <p>Die Grundlagen für Dein Projekt sind jetzt fertig! Öffne das Projekt in Eclipse, damit wir endlich Code schreiben können!</p>
          <h3 id="projekt_in_eclipse_&#246;ffnen">Projekt in Eclipse öffnen</h3>
          <p>Beim Entwickeln eines Java-Projektes wirst Du vermutlich eine IDE, beispielsweise Eclipse, verwenden. Daher wurde Arquillian auch IDE-freundlich konzipiert. Das bedeutet, dass Arquillian Tests aus der IDE ohne besondere Änderungen ausführbar sind. Darum starten wir auch gleich mit der IDE:</p>
          <p>Starte Eclipse. Da dies ein Maven-basiertes Projekt ist, benötigst Du die <a href="http://eclipse.org/m2e">Maven Integration for Eclipse</a>, auch m2e-Plugin genannt, um das Projekt zu öffnen. Hast Du diese nicht bereits installiert, kannst Du auch einfach die <a href="http://jboss.org/tools">JBoss Tools</a> installieren. Sie enthalten bereits die Maven-Integration. Die folgenden Schritte beschreiben die Installation direkt über den Eclipse Marketplace (eine Art AppStore für Eclipse-Plugins).</p>
          <ol>
          	<li>Wähle das Menü <code>Hilfe &gt; Eclipse Marketplace...</code> vom Hauptmenü</li>
          	<li>Tippe &#8220;jboss tools&#8221; in das Eingabefeld (ohne Anführungszeichen) und drücke <code>&lt;ENTER&gt;</code></li>
          	<li>Klicke auf den &#8220;Installieren&#8221;-Knopf neben dem Ergebnis &#8220;JBoss Tools (Indigo)&#8221;</li>
          	<li>Beende den Install Wizard und starte Eclipse neu, wenn Du dazu aufgefordert wirst.</li>
          </ol>
          <p>Bei den JBoss Tools handelt es sich um ein leichtgewichtiges Plugin, welches ein umfangreiches Set an Werkzeugen zur Entwicklung von Java-EE-Anwendungen inklusive CDI-Unterstützung bereitstellt. Um produktiv arbeiten zu können, empfehlen wir es daher, dieses Plugin zu verwenden.</p>
          <p>Wenn du darauf allerdings verzichten möchtest und lieber nur die Maven-Integration ohne Plugins verwenden möchtest, folge diesen einfachen Schritten:</p>
          <ol>
          	<li>Wähle das Menü <code>Hilfe &gt; Eclipse Marketplace...</code> vom Hauptmenü</li>
          	<li>Tippe &#8220;maven&#8221; in in das Eingabefeld (ohne Anführungszeichen) und drücke <code>&lt;ENTER&gt;</code></li>
          	<li>Klicke auf den &#8220;Installieren&#8221;-Knopf neben dem Ergebnis &#8220;Maven Integration for Eclipse&#8221;</li>
          	<li>Beende den Install Wizard und starte Eclipse neu wenn Du dazu aufgefordert wirst</li>
          	<li>Wiederhole die Schritte für die &#8220;Maven Integration für Eclipse WTP&#8221;</li>
          </ol>
          <p>Ist das Maven-Plugin installiert, kann man mit einfachen Schritten das Projekt direkt öffnen:</p>
          <ol>
          	<li>Wähle <code>Datei &gt; Import...</code> vom Hauptmenü</li>
          	<li>Tippe &#8220;existing maven&#8221; in in das Eingabefeld</li>
          	<li>Wähle die Option &#8220;Existing Maven Projects&#8221;, dann klicke auf den Weiter-Knopf</li>
          	<li>Klicke den &#8220;Durchsuchen &#8230;.&#8221; Knopf</li>
          	<li>Navigiere zum Projektverzeichnis in Deinem Dateisystem, dann Klicke den OK-Knopf.</li>
          	<li>Klicke auf &#8220;Fertig&#8221; um das Projekt zu öffnen</li>
          </ol>
          <p>Eclipse erkennt dann das Maven-Projekt und öffnet es in der Project Navigator View. Wenn Du das Projekt aufklappst, sollte es folgendermaßen aussehen:</p>
          <p><img src="/images/guides/arquillian_tutorial_eclipse_project.png" alt="" /></p>
          <p>Jetzt kann es aber wirklich losgehen!</p>
          <h3 id="eine_komponente_erstellen">Eine Komponente erstellen</h3>
          <p>Um einen Arquillian-Test schreiben zu können, benötigen wir erst einmal eine Komponente, welche es zu testen gibt. Wir fangen mit einer einfachen Komponente an, damit Du lernen kannst, wie ein einfach Arquillian-Test ausgeführt wird. In den nächsten Schritten geht es zu deutlich komplexeren Szenarien.</p>
          <p>Erstelle mithilfe Deiner IDE eine neue Java-Klasse mit dem Namen <code>Greeter</code> im <code>org.arquillian.example</code>-Package. Ersetze den Inhalt mit dem folgenden Code:</p>
          <div class="filename">src/main/java/org/arquillian/example/Greeter.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.io.PrintStream;</code>&#x000A;&#x000A;<code class="prettify">/**&#x000A; * A component for creating personal greetings.&#x000A; */&#x000A;public class Greeter {&#x000A;    public void greet(PrintStream to, String name) {&#x000A;        to.println(createGreeting(name));&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    public String createGreeting(String name) {&#x000A;        return "Hello, " + name + "!";&#x000A;    }&#x000A;}</code></pre>
          <p>Im Test wollen wir sicherstellen, dass diese Klasse sich richtig verhält, wenn sie als CDI (Contexts and Dependency Injection) Bean aufgerufen wird. Natürlich könnten wir jetzt auch einen einfachen Unit-Test schreiben, aber lass uns einfach annehmen, dass diese Bean weitere Enterprise Services wie beispielsweise Dependency Injection und Messaging nutzt und in einem Container ausgeführt werden muss. (Und außerdem hat es so Raum zu wachsen ~;))</p>
          <p>Um diese Klasse als CDI Bean zu benutzen, injizieren wir sie mithilfe der <code>@Inject</code>-Annotation in den Test. Das schreit doch geradezu nach einem Arquillian-Test! Nun wird es also Zeit, die Arquillian-API zum Projekt hinzuzufügen!</p>
          <h3 id="arquillia-apis_hinzuf&#252;gen">Arquillia-APIs hinzufügen</h3>
          <p>Öffne die <code>pom.xml</code> ein weiteres Mal im Editor. (Erinnerung: Sie liegt im Rootverzeichnis Deines Projektes). Jetzt muss Maven wissen, welche Version der Abhängigkeiten es verwenden soll. Dazu wird das folgende XML-Fragment direkt oberhalb des <code>&lt;build&gt;</code>-Elements eingefügt, um den sogenannten BOM (Bill of Materials) bzw. die Versionsmatrix für alle transitiven Abhängigkeiten von Arquillian zu importieren.</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependencyManagement&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.arquillian&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;arquillian-bom&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.1.13.Final&lt;/version&gt;&#x000A;            &lt;scope&gt;import&lt;/scope&gt;&#x000A;            &lt;type&gt;pom&lt;/type&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/dependencyManagement&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>Nun muss die Arquillian-JUnit-Integration als Abhängigkeit ergänzt werden. Dazu gehört dieses XML-Fragment unter das letzte geschlossene <code>&lt;dependency&gt;</code>-Element:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.arquillian.junit&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;arquillian-junit-container&lt;/artifactId&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>Die Arquillian-JUnit-Integration fügt auch die Arquillian- und die ShrinkWrap-APIs zum Test-Classpath hinzu. Alle diese Bibliotheken werden benötigt, um einen Arquillian-Test schreiben und kompilieren zu können.</p>
          <p class="info"><span>Um statt JUnit TestNG zu verwenden, muss die Arquillian-JUnit-Integration mit der Arquillian-TestNG-Integration ersetzt werden.</span></p>
          <p>Wenn Du Probleme mit dem bisher erstellten pom.xml hast, dann kannst Du eine komplette Version <a href="https://gist.github.com/1263892">von diesem gist</a> herunterladen.</p>
          <p><strong>Jetzt ist alles vorbereitet, um Deinen ersten Arquillian-Test zu schreiben!</strong></p>
          <h3 id="einen_arquillian-test_schreiben">Einen Arquillian-Test schreiben</h3>
          <p>Ein Arquillian-Test sieht erst mal so aus wie ein herkömmlicher Unittest. Allerdings mit etwas mehr Flair. Zurück zu Deiner IDE:</p>
          <p class="warning"><span>Wenn Du die Meldung &#8220;Project configuration is out of date with pom.xml&#8221; erhälst, dann klicke rechts auf das Projekt und wähle Project &gt; Maven &gt; Update Project Configuration, um das Projekt neu zu synchronisieren.</span></p>
          <p>Starten wir mit dem Erstellen eines neuen JUnit-Testfalls mit dem Namen <code>GreeterTest</code> im Verzeichnis src/test/java unterhalb des <code>org.arquillian.example</code>-Packages. Du wirst die typischen setUp()- und tearDown()- Methoden nicht benötigen, da Arquillian das meiste der harten Arbeit für Dich übernimmt. Das hier haben wir bisher:</p>
          <div class="filename">src/test/java/org/arquillian/example/GreeterTest.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import org.junit.Assert;&#x000A;import org.junit.Test;</code>&#x000A;&#x000A;<code class="prettify">public class GreeterTest {&#x000A;    @Test&#x000A;    public void should_create_greeting() {&#x000A;        Assert.fail("Not yet implemented");&#x000A;    }&#x000A;}</code></pre>
          <p>Nun zum Flair. Ein Arquillian-Testfall muss drei Dinge beinhalten:</p>
          <ol>
          	<li>Die <code>@RunWith(Arquillian.class)</code>-Annotation an der Klasse</li>
          	<li>Eine statische Methode annotiert mit <code>@Deployment</code>, welche ein ShrinkWrap-Archiv zurückgibt</li>
          	<li>Und mindestens eine Methode, welche mit <code>@Test</code> annotiert ist</li>
          </ol>
          <p>Die <code>@RunWith</code>-Annotation sagt JUnit, dass es den Arquillian-Testcontroller verwenden soll. Arquillian schaut dann nach der statischen Methode mit der <code>@Deployment</code>-Annotation und empfängt das Testarchiv (auch micro-deployment genannt). Dann passiert ein gewisses Maß an Magie und jede mit <code>@Test</code> annotierte Methode wird innerhalb der Containerumgebung ausgeführt.</p>
          <h4>Was genau ist ein Testarchiv?</h4>
          <p>Der Zweck eines Testarchivs ist die Isolation von Klassen und Ressourcen, welche für den Test benötigt werden, von dem Rest des Classpath. Im Gegensatz zu einem normalen Unittestfall bindet sich Arquillian nicht einfach in den kompletten Classpath ein. Im Gegenteil, Du fügst lediglich die Teile hinzu, welche auch vom Test benötigt werden (das kann der komplette Classpath sein, aber das entscheidest nur Du). Das Archiv wird per <a href="http://jboss.org/shrinkwrap">ShrinkWrap</a> definiert. Das ist eine Java-API zur Erzeugung von Archiven (beispielsweise jar, war, ear). Die Micro-deployment-Strategie erlaubt es Dir, Dich auf die eigentlichen Testklassen zu fokussieren. Im Ergebnis führt das zu sehr schlanken Testklassen.</p>
          <p class="info"><span>ShrinkWrap unterstützt auch das Auffinden von Artefakten (Bibliotheken) und das programmatische Erstellen von Konfigurationsdateien, welche ebenfalls im Testarchiv verpackt werden können. Für eine gründlichere Einführung in ShrinkWrap empfiehlt sich der <a href="/guides/shrinkwrap_introduction">ShrinkWrap introduction</a> guide.</span></p>
          <p>Fügen wir das Arquillian-Flair dem Test hinzu:</p>
          <div class="filename">src/test/java/org/arquillian/example/GreeterTest.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import org.jboss.arquillian.container.test.api.Deployment;&#x000A;import org.jboss.arquillian.junit.Arquillian;&#x000A;import org.jboss.shrinkwrap.api.ShrinkWrap;&#x000A;import org.jboss.shrinkwrap.api.asset.EmptyAsset;&#x000A;import org.jboss.shrinkwrap.api.spec.JavaArchive;&#x000A;import org.junit.Assert;&#x000A;import org.junit.Test;&#x000A;import org.junit.runner.RunWith;</code>&#x000A;&#x000A;<code class="prettify">@RunWith(Arquillian.class)&#x000A;public class GreeterTest {</code>&#x000A;&#x000A;<code class="prettify">    @Deployment&#x000A;    public static JavaArchive createDeployment() {&#x000A;        return ShrinkWrap.create(JavaArchive.class)&#x000A;            .addClass(Greeter.class)&#x000A;            .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @Test&#x000A;    public void should_create_greeting() {&#x000A;        Assert.fail("Not yet implemented");&#x000A;    }&#x000A;}</code></pre>
          <p>Mithilfe von ShrinkWrap haben wir ein Java-Archiv (jar) als Deployment-Artefakt definiert. Es enthält die zu testende <code>Greeter</code>-Klasse und eine leere beans.xml-Datei, welche als Ressource im META-INF-Verzeichnis liegen soll. Mit diesem Trick aktivieren wir die CDI-Funktionen für dieses Archiv.</p>
          <p>Alles was nun noch zu tun bleibt, ist, die <code>Greeter</code>-Instanz in ein Feld direkt oberhalb der Testmethode zu injizieren und die bisher nicht implementierte Testmethode mit einem Assert auf das Verhalten des Beans auszuprogrammieren.<br />
          Um Dir ein warmes und wohliges Gefühl zu vermitteln, werden wir auch die Begrüßung auf der Konsole ausgeben.</p>
          <div class="filename">src/test/java/org/arquillian/example/GreeterTest.java</div>
          <pre class="prettify"><code class="prettify">// clip&#x000A;import javax.inject.Inject;&#x000A;// clip</code>&#x000A;&#x000A;<code class="prettify">@Inject&#x000A;Greeter greeter;</code>&#x000A;&#x000A;<code class="prettify">@Test&#x000A;public void should_create_greeting() {&#x000A;    Assert.assertEquals("Hello, Earthling!",&#x000A;        greeter.createGreeting("Earthling"));&#x000A;    greeter.greet(System.out, "Earthling");&#x000A;}</code></pre>
          <p>Und so sieht dann der fertige Test aus:</p>
          <div class="filename">src/test/java/org/arquillian/example/GreeterTest.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import javax.inject.Inject;&#x000A;import org.jboss.arquillian.container.test.api.Deployment;&#x000A;import org.jboss.arquillian.junit.Arquillian;&#x000A;import org.jboss.shrinkwrap.api.ShrinkWrap;&#x000A;import org.jboss.shrinkwrap.api.asset.EmptyAsset;&#x000A;import org.jboss.shrinkwrap.api.spec.JavaArchive;&#x000A;import org.junit.Test;&#x000A;import org.junit.Assert;&#x000A;import org.junit.runner.RunWith;</code>&#x000A;&#x000A;<code class="prettify">@RunWith(Arquillian.class)&#x000A;public class GreeterTest {</code>&#x000A;&#x000A;<code class="prettify">    @Deployment&#x000A;    public static JavaArchive createDeployment() {&#x000A;        return ShrinkWrap.create(JavaArchive.class)&#x000A;            .addClass(Greeter.class)&#x000A;            .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @Inject&#x000A;    Greeter greeter;</code>&#x000A;&#x000A;<code class="prettify">    @Test&#x000A;    public void should_create_greeting() {&#x000A;        Assert.assertEquals("Hello, Earthling!",&#x000A;            greeter.createGreeting("Earthling"));&#x000A;        greeter.greet(System.out, "Earthling");&#x000A;    }&#x000A;}</code></pre>
          <p>Glückwunsch! Damit hast Du gerade Deinen ersten Arquillian-Test geschrieben!</p>
          <p>Ahhh. Aber Du wunderst Dich vielleicht darüber, wie Du ihn ausführen sollst? ~:S Wenn Du denkst, &#8220;Einfach wie einen JUnit-Test&#8221;, liegst Du genau richtig! Dennoch müssen wir zuerst einen Container-Adapter zum Classpath hinzufügen.</p>
          <h3 id="einen_container-adapter_hinzuf&#252;gen">Einen Container-Adapter hinzufügen</h3>
          <p>Wir haben eine Menge über Tests innerhalb irgendeines Containers gesprochen, bisher aber nicht gesagt, welchen Container wir verwenden. Das liegt daran, dass es eine Laufzeitentscheidung ist.</p>
          <p>Arquillian wählt den Ziel-Container auf der Grundlage des im Classpath verfügbaren Container-Adapters aus. Das bedeutet, dass wir weitere Bibliotheken zum Projekt hinzufügen werden.</p>
          <p>Ein Arquillian-Test kann in allen Containern ausgeführt werden, welche mit dem Programmiermodell des Tests kompatibel sind und für die Arquillian einen entsprechenden Container-Adapter bereitstellt. Der bisherige Test verwendet das CDI-Programmiermodell; wir benötigen also einen Container, welcher dieses unterstützt. Wir wollen einen schnellen Roundtrip und starten daher mit dem Weld EE embedded Container.</p>
          <p>Öffne wieder die Projektkonfiguration <code>pom.xml</code> und füge die folgende Gruppe von Abhängigkeiten unterhalb des letzten, schließenden <code>&lt;dependency&gt;</code>-Elements hinzu:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;arquillian-weld-ee-embedded-1.1&lt;/artifactId&gt;&#x000A;    &lt;version&gt;1.0.0.CR9&lt;/version&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.weld&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;weld-core&lt;/artifactId&gt;&#x000A;    &lt;version&gt;2.3.5.Final&lt;/version&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;&#x000A;    &lt;version&gt;1.6.4&lt;/version&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>Zusammenfassend benötigst Du diese drei Bibliotheken, um Arquillian mit JUnit zu verwenden:</p>
          <ol>
          	<li>Die Arquillian-JUnit-Integration</li>
          	<li>Einen Arquillian-Container-Adapter für den gewünschten Zielcontainer</li>
          	<li>Die Container-Laufzeit (für einen embedded container) oder einen Container-Client (für einen remote container)</li>
          </ol>
          <p>Wir verwenden einen sogenannten &#8220;embedded container&#8221; in diesem Beispiel. Das bedeutet, wir benötigen die Container-Laufzeitumgebung: Also Weld.</p>
          <p>Aber zurück zum Test.</p>
          <h3 id="den_arquillian-test_ausf&#252;hren">Den Arquillian-Test ausführen</h3>
          <p>Sind alle notwendigen Abhängigkeiten bzw. Bibliotheken dem Classpath hinzugefügt, kann der Arquillian-Test genau wie ein Unittest ausgeführt werden; egal ob durch die IDE oder das Buildscript oder andere Build-Plugins. Wir führen den Beispieltest in Eclipse aus.</p>
          <p>Im IDE-Fenster klicke mit der rechten Maustaste auf die <code>GreeterTest.java</code>-Datei im Eclipse Package Explorer (oder im Editor) und wähle &#8220;Run As &gt; JUnit Test&#8221; aus dem Kontextmenü.</p>
          <p><img src="/images/guides/arquillian_tutorial_run_junit_test.png" alt="" /></p>
          <p>Bei der Ausführung des Tests solltest Du die folgende Ausgabe auf der Konsole sehen:</p>
          <pre class="output"><code class="output">21 [main] INFO org.jboss.weld.Version - WELD-000900 2.3.5 (Final)&#x000A;Hello, Earthling!</code></pre>
          <p>Dann sollte die JUnit View erscheinen und eine <strong class="greenbar">green bar</strong> anzeigen!</p>
          <p><img src="/images/guides/arquillian_tutorial_junit_green_bar.png" alt="" /></p>
          <p>Auch direkt über Maven von der Kommandozeile kann der Test ausgeführt werden:</p>
          <pre class="command"><code class="command">$ mvn test</code></pre>
          <p>Die nachfolgende Ausgabe sollte dabei auf der Konsole erscheinen:</p>
          <pre class="output"><code class="output">-------------------------------------------------------&#x000A;T E S T S&#x000A;-------------------------------------------------------&#x000A;Running org.arquillian.example.GreeterTest&#x000A;19 [main] INFO org.jboss.weld.Version - WELD-000900 2.3.5 (Final)&#x000A;Hello, Earthling!&#x000A;Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.907 sec</code></pre>
          <p><strong>Herzlichen Glückwunsch!</strong> Du hast Dir grade Deine erste <strong class="greenbar">green bar</strong> mit Arquillian verdient!</p>
          <h3 id="genauer_hingeschaut">Genauer hingeschaut!</h3>
          <p>Wie kannst Du wissen, dass CDI wirklich funktioniert? Nach allem, was Du weißt, hat Arquillian eine neue Instanz der <code>Greeter</code>-Klasse erzeugt und in den Test ohne weitere Beteiligung von CDI injiziert. Lass uns beweisen, dass sie wirklich da ist.</p>
          <p>Erstelle eine neue CDI-Bean mit dem Namen <code>PhraseBuilder</code> im <code>org.arquillian.example</code>-Package. Diese soll Sätze aus Vorlagen erstellen können.</p>
          <div class="filename">src/main/java/org/arquillian/example/PhraseBuilder.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.text.MessageFormat;&#x000A;import java.util.HashMap;&#x000A;import java.util.Map;&#x000A;import javax.annotation.PostConstruct;</code>&#x000A;&#x000A;<code class="prettify">public class PhraseBuilder {&#x000A;    private Map&lt;String, String&gt; templates;</code>&#x000A;&#x000A;<code class="prettify">    public String buildPhrase(String id, Object... args) {&#x000A;        return MessageFormat.format(templates.get(id), args);&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @PostConstruct&#x000A;    public void initialize() {&#x000A;        templates = new HashMap&lt;String, String&gt;();&#x000A;        templates.put("hello", "Hello, {0}!");&#x000A;    }&#x000A;}</code></pre>
          <p>Öffne nun die <code>Greeter</code>-Klasse und erstelle einen neuen Konstruktor, welcher eine <code>PhraseBuilder</code>-Instanz über Constructor Injection erzeugt. Dann delegiere die Erzeugung der Begrüßung an die injizierte Bean.</p>
          <div class="filename">src/main/java/org/arquillian/example/Greeter.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.io.PrintStream;&#x000A;import javax.inject.Inject;</code>&#x000A;&#x000A;<code class="prettify">public class Greeter {</code>&#x000A;&#x000A;<code class="prettify">    private PhraseBuilder phraseBuilder;</code>&#x000A;&#x000A;<code class="prettify">    @Inject&#x000A;    public Greeter(PhraseBuilder phraseBuilder) {&#x000A;        this.phraseBuilder = phraseBuilder;&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    public void greet(PrintStream to, String name) {&#x000A;        to.println(createGreeting(name));&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    public String createGreeting(String name) {&#x000A;        return phraseBuilder.buildPhrase("hello", name);&#x000A;    }&#x000A;}</code></pre>
          <p>Damit der Test wirklich funktioniert, muss jetzt also eine Instanz der Klasse <code>PhraseBuilder</code> erstellt werden, seine <code>@PostConstruct</code> Methode ausgeführt und in den Constructor der <code>Greeter</code> Instanz injiziert werden, sobald eine <code>Greeter</code>-Instanz erzeugt wird. Wir können sicher sein, dass CDI am Werk ist, wenn all dies zusammenspielt.</p>
          <p>Ein letzter Schritt: Da wir eine neue Klasse erstellt haben, müssen wir zuerst sicherstellen, dass diese in der <code>@Deployment</code>-Methode des Tests dem Archiv hinzugefügt wird. Dazu verändern wir einfach die folgende Zeile von:</p>
          <pre class="prettify"><code class="prettify">.addClass(Greeter.class)</code></pre>
          <p>&#8230;nach:</p>
          <pre class="prettify"><code class="prettify">.addClasses(Greeter.class, PhraseBuilder.class)</code></pre>
          <p>Lass den Test erneut ablaufen. Du solltest erneut eine <strong class="greenbar">green bar</strong>! sehen! Fühlt sich gut an, nicht wahr?</p>
          <h3 id="den_test_debuggen">Den Test debuggen</h3>
          <p>Das wird ein kurzes Kapitel. Warum? Weil Arquillian-Tests so unkompliziert sind, dass Du sie genauso wie alle anderen Unittests debuggen kannst. Füge einfach irgendwo einen Breakpoint hinzu (entweder im Test-Code oder im Anwendungs-Code) und klicke mit der rechten Maustaste oder im Editor auf den Test und wähle &#8220;Debug As &gt; JUnit Test&#8221;. Jetzt debuggst Du im Container!</p>
          <p><img src="/images/guides/arquillian_tutorial_debugging_test.png" alt="" /></p>
          <p class="warning"><span>Wenn Du einen Remote Container verwendest, funktioniert das so nicht. Stattdessen muss der Container im Debug Mode gestartet und der Debugger angehängt werden. Der Test läuft dann nämlich in einer anderen JVM als der eigentliche Code.</span></p>
          <p>Du hast grade erlebt, dass Arquillian das ideale Werkzeug für das Testen von CDI-Anwendungen ist. Es kümmert sich um das Laden der CDI-Umgebung und injiziert die Beans direkt in den Testfall. Das Beste daran ist, dass bei der Verwendung des Embedded-CDI-Containers die Tests genauso schnell ablaufen wie bei einem einfachen Unittest. Wenn das alles ist, was Du benötigst, kannst Du den Guide jetzt zumachen und anfangen Tests zu erstellen.</p>
          <p><strong>Aber!</strong> Erzählt uns der Embedded Container die gesamte Geschichte? Wird die Komponente funktionieren, wenn diese in einem echten Container ausgeführt wird?</p>
          <p>Einer der Vorteile von Arquillian ist, dass der gleiche Test in verschiedenen kompatiblen Containern ausgeführt werden kann, egal ob Embedded oder Remote. Wenn Du daran denkst, mehrere Container zu verwenden, lies einfach weiter.</p>
          <h3 id="weitere_container_hinzuf&#252;gen">Weitere Container hinzufügen</h3>
          <p>Wie Du weißt, wählt Arquillian den Container auf Grund des verfügbaren Adapters im Classpath. Um zu einem anderen Container zu wechseln, wechsele einfach den Container-Adapter vor dem Ausführen der Tests.</p>
          <p class="important"><span>Zu einer bestimmten Zeit darf immer nur ein Container-Adapter im Classpath sein!</span></p>
          <p>Ein Weg die Bibliotheken (Adapter) im Classpath zu wechseln ist es, die Abhängigkeiten in der <code>pom.xml</code> jedes Mal manuell zu ändern. Aber es gibt einen viel besseren Weg.</p>
          <p>Wir können die sogenannten Maven-Profile verwenden, um die Abhängigkeiten in Gruppen zu verteilen: Eine Gruppe/Profil für jeden Container-Adapter und die zugehörigen, weiteren Abhängigkeiten. Zur Testdurchführung muss dann lediglich die richtige Gruppe bzw. das richtige Profil per Kommandozeilenparameter (-P) oder per Voreinstellung in der IDE gewechselt werden.</p>
          <p>Öffne die <code>pom.xml</code>-Datei und erstelle ein neues Maven-Profil für den Weld-EE-Embedded-Container durch das Einfügen der folgenden Zeilen direkt unterhalb des schließenden <code>&lt;dependencies&gt;</code>-Element.</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;profiles&gt;&#x000A;    &lt;profile&gt;&#x000A;        &lt;id&gt;arquillian-weld-ee-embedded&lt;/id&gt;&#x000A;        &lt;dependencies&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.0.3.Final&lt;/version&gt;&#x000A;                &lt;type&gt;pom&lt;/type&gt;&#x000A;                &lt;scope&gt;provided&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;arquillian-weld-ee-embedded-1.1&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.0.0.CR9&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.weld&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;weld-core&lt;/artifactId&gt;&#x000A;                &lt;version&gt;2.3.5.Final&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.6.4&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;        &lt;/dependencies&gt;&#x000A;    &lt;/profile&gt;&#x000A;&lt;/profiles&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>Als nächstes <strong>entfernst</strong> Du die <code>jboss-javaee-7.0</code>- und die Weld-EE Container-Adapter-Abhängigkeiten aus der Hauptsektion der  <code>&lt;dependencies&gt;</code>. Das sollte dann so aussehen, wenn Du fertig bist:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependencies&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;        &lt;version&gt;4.12&lt;/version&gt;&#x000A;        &lt;scope&gt;test&lt;/scope&gt;&#x000A;    &lt;/dependency&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;org.jboss.arquillian.junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;arquillian-junit-container&lt;/artifactId&gt;&#x000A;        &lt;scope&gt;test&lt;/scope&gt;&#x000A;    &lt;/dependency&gt;&#x000A;&lt;/dependencies&gt;&#x000A;&lt;profiles&gt;&#x000A;    &lt;profile&gt;&#x000A;        &lt;id&gt;arquillian-weld-ee-embedded&lt;/id&gt;&#x000A;        &lt;dependencies&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.0.3.Final&lt;/version&gt;&#x000A;                &lt;type&gt;pom&lt;/type&gt;&#x000A;                &lt;scope&gt;provided&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;arquillian-weld-ee-embedded-1.1&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.0.0.CR9&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.weld&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;weld-core&lt;/artifactId&gt;&#x000A;                &lt;version&gt;2.3.5.Final&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.6.4&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;        &lt;/dependencies&gt;&#x000A;    &lt;/profile&gt;&#x000A;&lt;/profiles&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p class="info"><span>Die Java-EE-API-Abhängigkeit ist ebenfalls in das Container-Adapter-Profil gewandert, da manche Container wie beispielsweise der Embedded GlassFish diese bereits mitbringen. Beide im Classpath zu haben würde zu Problemen führen. Darum dieser Tanz mit dem Classpath.</span></p>
          <p>Jetzt fügen wir zwei weitere Profile in die <code>pom.xml</code>-Datei innerhalb des <code>&lt;profiles&gt;</code>-Elements ein. Zuerst für den <a href="http://embedded-glassfish.java.net">Embedded GlassFish</a>:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;profile&gt;&#x000A;    &lt;id&gt;arquillian-glassfish-embedded&lt;/id&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;arquillian-glassfish-embedded-3.1&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.0.0.CR4&lt;/version&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.glassfish.main.extras&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;glassfish-embedded-all&lt;/artifactId&gt;&#x000A;            &lt;version&gt;3.1.2&lt;/version&gt;&#x000A;            &lt;scope&gt;provided&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/profile&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>und das andere Profil für den JBoss AS managed:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;profile&gt;&#x000A;    &lt;id&gt;arquillian-jbossas-managed&lt;/id&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.0.3.Final&lt;/version&gt;&#x000A;            &lt;type&gt;pom&lt;/type&gt;&#x000A;            &lt;scope&gt;provided&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.as&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;jboss-as-arquillian-container-managed&lt;/artifactId&gt;&#x000A;            &lt;version&gt;7.1.1.Final&lt;/version&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/profile&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>Jetzt haben wir die Wahlmöglichkeit die Tests in einem der drei Container auszuführen.</p>
          <p>Wenn du Probleme mit der pom.xml Datei hast, kannst Du die bisher erstelle direkt <a href="https://gist.github.com/1263934">als gist datei herunterladen</a>.</p>
          <h3 id="test_mit_mehreren_containern">Test mit mehreren Containern</h3>
          <p>Aktualisierst Du das Projekt jetzt in Eclipse  wirst Du feststellen, dass es nicht mehr gebaut wird. Das liegt daran, dass Du der IDE erst noch sagen musst, welches Maven-Profil sie verwenden soll. Also aktivieren wir mal das Weld-EE-embedded-Profil, um den Ausgangszustand wiederherzustellen.</p>
          <p>In Eclipse gibt es zwei Wege, um Maven-Profile zu aktivieren:</p>
          <ol>
          	<li>Die manuelle Konfiguration (Standardansatz)</li>
          	<li>oder der Maven Profile Selector (durch die JBoss Tools bereitgestellt)</li>
          </ol>
          <h4>Aktives Maven-Profil setzen: Manuelle Konfiguration</h4>
          <p>Um das aktive Maven-Profil zu setzen, folge diesen Schritten:</p>
          <ol>
          	<li>Rechts-Klick auf das Projekt und Auswahl von &#8220;Eigenschaften&#8221;</li>
          	<li>Wähle den Maven-Eigenschaften-Reiter</li>
          	<li>Gib die Profil-ID in das Aktive-Maven-Profiles-Feld ein (beispielsweise <code>arquillian-weld-ee-embedded</code>)</li>
          	<li>Klicke auf den OK-Knopf und akzeptiere die Projektänderungen</li>
          </ol>
          <p>Hier ist ein Screenshot des Maven-Eigenschaften-Dialogs, welcher die aktivierten Profile anzeigt:</p>
          <p><img src="/images/guides/arquillian_tutorial_maven_properties.png" alt="" /></p>
          <h4>Aktives Maven Profil setzen: Maven Profile Selector</h4>
          <p>Wenn Du die JBoss Tools installiert hast, wird das Auswählen des aktiven Maven-Profils noch einfacher:</p>
          <ol>
          	<li>Rechts-Klick auf das Projekt und Auswahl von &#8220;Maven &gt; Select Active Profiles&#8230;&#8221; (Alternativ kann dies auch per Ctrl+Shift+P oder dem Knopf aus der Toolbar erfolgen)</li>
          	<li>Wähle die Box neben dem Profil, welches Du aktivieren willst, an (beispielsweise <code>arquillian-weld-ee-embedded</code>).</li>
          	<li>Klicke auf den OK-Knopf.</li>
          </ol>
          <p>Hier ist ein Screenshot des Maven-Profil-Selector-Dialogs, welcher die aktivierten Profile anzeigt:</p>
          <p><img src="/images/guides/arquillian_tutorial_maven_profile_selector.png" alt="" /></p>
          <p>Ist das Profil einmal aktiviert, sollte der Test wieder erfolgreich ausgeführt werden können.</p>
          <p>Du weißt schon, dass der Test im Weld-EE-Embedded-Container funktioniert. Nun wechseln wir auf den GlassFish Embedded, indem die o.g. Schritte durchgeführt werden. Diesmal aktiviere allerdings das <code>arquillian-glassfish-embedded</code>-Profil. Führe den Test erneut aus. Du solltest auf der Konsole sehen, wie der GlassFish startet, gefolgt von einer erneuten <strong class="greenbar">green bar</strong>!</p>
          <p>Du hast die Tests nun auf verschiedenen Embedded-Containern ausgeführt, einem CDI-Container (Weld) und einem Java-EE-Container (GlassFish). Bei beiden handelte es sich um Container, welche in der gleichen JVM wie die Tests laufen. Um wirklich sicher zu sein, müssen die Tests in einem alleinstehenden Container erfolgreich durchlaufen werden. Daher wechseln wir zum JBoss AS.</p>
          <p>Um die Tests in einer alleinstehenden Instanz vom JBoss AS laufen zu lassen, muss diese erst einmal konfiguriert werden. Dies geschieht entweder:</p>
          <ol>
          	<li>durch Herunterladen und Entpacken der Distribution an eine Stelle im Dateisystem außerhalb des Projekts oder</li>
          	<li>du lässt Maven beides beim Bauen des Projekts selber machen.</li>
          </ol>
          <p>Folge diesen Schritten, um JBoss AS 7 außerhalb des Projekts aufzusetzen:</p>
          <ol>
          	<li><a href="http://jboss.org/jbossas/downloads">Lade JBoss AS 7 herunter</a><br />
          (Versichere Dich, dass die Version, die Du auswählst, genau zu der Version passt, die Du in Deinem <code>pom.xml</code> für <code>&lt;artifactId&gt;jboss-as-arquillian-container-managed&lt;/artifactId&gt;</code> angegeben hast!)</li>
          	<li>Packe das Archiv aus</li>
          	<li>(optional) Setze die <code>JBOSS_HOME</code>-Umgebungs-Variable auf den Pfad des ausgepackten Archivs.</li>
          </ol>
          <p>Um Maven die Arbeit beim Bauen machen zu lassen, musst Du das folgenden XML-Fragment unter das schließende <code>&lt;id&gt;</code> Element des <code>arquillian-jbossas-managed</code>-Profils einfügen:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;build&gt;&#x000A;    &lt;plugins&gt;&#x000A;        &lt;plugin&gt;&#x000A;            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;&#x000A;            &lt;executions&gt;&#x000A;                &lt;execution&gt;&#x000A;                    &lt;id&gt;unpack&lt;/id&gt;&#x000A;                    &lt;phase&gt;process-test-classes&lt;/phase&gt;&#x000A;                    &lt;goals&gt;&#x000A;                        &lt;goal&gt;unpack&lt;/goal&gt;&#x000A;                    &lt;/goals&gt;&#x000A;                    &lt;configuration&gt;&#x000A;                        &lt;artifactItems&gt;&#x000A;                            &lt;artifactItem&gt;&#x000A;                                &lt;groupId&gt;org.jboss.as&lt;/groupId&gt;&#x000A;                                &lt;artifactId&gt;jboss-as-dist&lt;/artifactId&gt;&#x000A;                                &lt;version&gt;7.1.1.Final&lt;/version&gt;&#x000A;                                &lt;type&gt;zip&lt;/type&gt;&#x000A;                                &lt;overWrite&gt;false&lt;/overWrite&gt;&#x000A;                                &lt;outputDirectory&gt;target&lt;/outputDirectory&gt;&#x000A;                            &lt;/artifactItem&gt;&#x000A;                        &lt;/artifactItems&gt;&#x000A;                    &lt;/configuration&gt;&#x000A;                &lt;/execution&gt;&#x000A;            &lt;/executions&gt;&#x000A;        &lt;/plugin&gt;&#x000A;    &lt;/plugins&gt;&#x000A;&lt;/build&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>Die Managed-JBoss-AS-7-Instanz benötigt ein wenig Arquillian-Konfiguration. Erstelle eine Datei mit dem Namen arquillian.xml unter <code>src/test/resources</code> und ändere den Wert des <code>jbossHome</code>-Property auf das Verzeichnis, in das Du den JBoss AS 7 installiert hast. Wenn Du Maven die Arbeit beim Bauen machen lässt (maven dependency plugin), lautet der Wert <code>target/jboss-as-7.1.1.Final</code>.</p>
          <div class="filename">src/test/resources/arquillian.xml</div>
          <pre class="prettify"><code class="prettify">&lt;arquillian xmlns="http://jboss.org/schema/arquillian"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://jboss.org/schema/arquillian&#x000A;        http://jboss.org/schema/arquillian/arquillian_1_0.xsd"&gt;&#x000A;    &lt;container qualifier="jbossas-managed" default="true"&gt;&#x000A;        &lt;configuration&gt;&#x000A;            &lt;property name="jbossHome"&gt;target/jboss-as-7.1.1.Final&lt;/property&gt;&#x000A;        &lt;/configuration&gt;&#x000A;    &lt;/container&gt;&#x000A;&lt;/arquillian&gt;</code></pre>
          <p>Wechsele jetzt das aktive Maven-Profil auf <code>arquillian-jbossas-managed</code> und lass die Tests ein letztes mal laufen. Du solltest in der Konsole sehen, wie der JBoss AS 7 startet und &#8230;.. dann eine erneute <strong class="greenbar">green bar</strong> erscheint!</p>
          <p class="info"><span>Die Meldungen von System.out werden direkt ins Serverlog und nicht auf die Konsole geschrieben.</span></p>
          <p>Das ist <em>der gleiche</em> Test, nur diesmal in einem alleinstehenden (nicht eingebetteten) Java-EE-Container. Arquillian packt das Testarchiv, deployt es auf den Container als Java-EE-Archiv und führt den Test remote durch, erfasst dann die Ergebnisse und stellt sie der Eclipse-JUnit-Ergebnis-View (oder dem Maven-Surefire-Plugin) zur Verfügung.</p>
          <h3 id="share">Share the Knowledge</h3>
          <p>Find this guide useful?</p>
          <p class="post_to_twitter"><a href="http://twitter.com/home/?status=Just%20read%20the%20%23Arquillian%20Erste%20Schritte%20guide%20and%20got%20a%20%23greenbar!%20Get%20yours.%20http://arquillian.org/guides/getting_started_de/"><img src="/images/post_to_twitter.png" alt="" /></a></p>
          <div class="g-plusone" data-size="tall"></div>
          <p>There&#8217;s a lot more about Arquillian to cover. If you&#8217;re ready to learn more, check out the <a href="/guides">other available guides</a>.</p>
          <h4>Feedback</h4>
          <p>Find a bug in the guide? Something missing? You can fix it by <a href="http://github.com/arquillian/arquillian.github.com">forking this website</a>, making the correction and <a href="http://help.github.com/send-pull-requests">sending a pull request</a>. If you&#8217;re just plain stuck, feel free to ask a question in the <a href="http://community.jboss.org/en/arquillian?view=discussions">user discussion forum</a>.</p>
          <h4>Recent Changelog</h4>
          <ul>
            <li>
              Jul 12, 2017:
              Fix(german getting started) typos, commas, hypens (#385)
              <em>by oliver-gramberg</em>
            </li>
            <li>
              Mar 22, 2017:
              Resolves docs property for every component
              <em>by Bartosz Majsak</em>
            </li>
          </ul>
          <p>
            <a href="https://github.com/arquillian/arquillian.github.io/commits/develop/guides/getting_started_de.textile">See full history &raquo;</a>
          </p>
        </div>
        <div id="sidebar">
          <div id="toc">
            <h3 class="chapter_header">Chapters</h3>
            <ol class="chapters">
              <li>
                <a href="#annahmen" id="annahmen_link">Annahmen</a>
              </li>
              <li>
                <a href="#erstelle_ein_neues_projekt" id="erstelle_ein_neues_projekt_link">Erstelle ein neues Projekt</a>
              </li>
              <li>
                <a href="#projekt_in_eclipse_&#246;ffnen" id="projekt_in_eclipse_öffnen_link">Projekt in Eclipse öffnen</a>
              </li>
              <li>
                <a href="#eine_komponente_erstellen" id="eine_komponente_erstellen_link">Eine Komponente erstellen</a>
              </li>
              <li>
                <a href="#arquillia-apis_hinzuf&#252;gen" id="arquillia-apis_hinzufügen_link">Arquillia-APIs hinzufügen</a>
              </li>
              <li>
                <a href="#einen_arquillian-test_schreiben" id="einen_arquillian-test_schreiben_link">Einen Arquillian-Test schreiben</a>
              </li>
              <li>
                <a href="#einen_container-adapter_hinzuf&#252;gen" id="einen_container-adapter_hinzufügen_link">Einen Container-Adapter hinzufügen</a>
              </li>
              <li>
                <a href="#den_arquillian-test_ausf&#252;hren" id="den_arquillian-test_ausführen_link">Den Arquillian-Test ausführen</a>
              </li>
              <li>
                <a href="#genauer_hingeschaut" id="genauer_hingeschaut_link">Genauer hingeschaut!</a>
              </li>
              <li>
                <a href="#den_test_debuggen" id="den_test_debuggen_link">Den Test debuggen</a>
              </li>
              <li>
                <a href="#weitere_container_hinzuf&#252;gen" id="weitere_container_hinzufügen_link">Weitere Container hinzufügen</a>
              </li>
              <li>
                <a href="#test_mit_mehreren_containern" id="test_mit_mehreren_containern_link">Test mit mehreren Containern</a>
              </li>
              <li>
                <a href="#share" id="share_link">Share the Knowledge</a>
              </li>
            </ol>
          </div>
        </div>
        <script>
          $(window).load(function() { activateScrollingToc(['annahmen', 'erstelle_ein_neues_projekt', 'projekt_in_eclipse_öffnen', 'eine_komponente_erstellen', 'arquillia-apis_hinzufügen', 'einen_arquillian-test_schreiben', 'einen_container-adapter_hinzufügen', 'den_arquillian-test_ausführen', 'genauer_hingeschaut', 'den_test_debuggen', 'weitere_container_hinzufügen', 'test_mit_mehreren_containern', 'share']) })
        </script>
      </div>
    </div>
    <footer>
      <div class="container">
        <div class="project">
          <img src="/images/arquillian_logo_200px.png" />
          <p class="bottom">
            &#169;
            Copyright 2009-2017 Red Hat, Inc.
            <br />
            <i class="icon-fire"></i>
            Mixed with <a href="http://twitter.github.com/bootstrap">Bootstrap</a>. Baked by <a href="http://awestruct.org">Awestruct</a>.
            <br />
            <i class="icon-share-alt"></i>
            Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
            <br />
            Code released under <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>.
          </p>
        </div>
        <div class="footer-nav">
          <h4>Learn</h4>
          <ul>
            <li>
              <a href="/invasion">Mission</a>
            </li>
            <li>
              <a href="/features">Features</a>
            </li>
            <li>
              <a href="/docs">Documentation</a>
            </li>
            <li>
              <a href="/guides">Guides</a>
            </li>
            <li>
              <a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Manual</a>
            </li>
            <li>
              <a href="http://community.jboss.org/en/arquillian/faq">FAQs</a>
            </li>
          </ul>
        </div>
        <div class="footer-nav">
          <h4>Get Involved</h4>
          <ul>
            <li>
              <a href="http://community.jboss.org/en/arquillian?view=discussions">Forums</a>
            </li>
            <li>
              <a href="https://issues.jboss.org/browse/ARQ">Issue Tracker</a>
            </li>
            <li>
              <a href="https://github.com/arquillian">Source Code</a>
            </li>
            <li>
              <a href="/community/contributors">Contributors</a>
            </li>
            <li>
              <a href="https://community.jboss.org/groups/testing">Testing SIG</a>
            </li>
          </ul>
        </div>
        <div class="sponser">
          <div class="follow-us">
            <h4>Stay Informed</h4>
            <ul>
              <li>
                <a href="https://plus.google.com/100660127586085393031?rel=author"><img alt="Google+" src="/images/social/googleplus-16.png" title="Follow Arquillian on Google+" /></a>
              </li>
              <li>
                <a href="https://twitter.com/#!/search/%23arquillian"><img alt="Twitter" src="/images/social/twitter-16.png" title="Browse the #arquillian hashtag on Twitter" /></a>
              </li>
              <li>
                <a href="http://www.linkedin.com/groups?gid=3120340"><img alt="LinkedIn" src="/images/social/linkedin-16.png" title="Join the Arquillian group on LinkedIn" /></a>
              </li>
              <li>
                <a href="http://vimeo.com/channels/arquillian"><img alt="Vimeo" src="/images/social/vimeo-16.png" title="Follow the Arquillian channel on Vimeo" /></a>
              </li>
            </ul>
          </div>
          <p>This website is open source! If you want to improve it, <a href="http://github.com/arquillian/arquillian.github.com">fork the project</a>, hack on it, then send a <a href="https://help.github.com/articles/using-pull-requests">pull request</a>. You can also view the <a href="http://www.seethestats.com/site/arquillian.org">visitor stats</a>.</p>
          <p class="image"><a href="http://jboss.org"><img src="/images/jboss_redhat_branding.png" class="branding" title="Red Hat, Inc." alt="Red Hat, Inc." /></a></p>
          <p>Arquillian is a <a href="http://jboss.org">JBoss Community</a> project and development is sponsored by Red Hat, Inc.</p>
          <p class="bottom"><a href="http://www.redhat.com/legal/legal_statement.html">Terms of Use</a> | <a href="http://www.redhat.com/legal/privacy_statement.html">Privacy Policy</a></p>
        </div>
        <a class="visible-desktop" href="#" id="toTop">Top</a>
      </div>
    </footer>
    <script>
      $(function() {
        $('html').addClass('ready');
        prettify();
        activateFooterGravity();
        activateTooltips();
        activateToTopControl();
      });
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.2/bootstrap.min.js"></script>
    <script src="/javascripts/prettify.js"></script>
    <script src="/javascripts/site.js?b52ff7178db0becf75d043579212b77c1f982da3"></script>
    <script src="/javascripts/jquery-scroll.js"></script>
    <script src="http://apis.google.com/js/plusone.js"></script>
    <script>
      (function() {
        var po = document.createElement('script'); po.async = true; po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount','UA-18727998-3']);
    _gaq.push(['_trackPageview']);
    (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
