<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Testing Java Persistence &#183; Arquillian Guides</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="Teste deine Daten! Lerne wie du in einem Arquillian Test Java Persistence (JPA) Queries mit verschiedenen Providern testest." name="description" />
    <link href="/blog/atom.xml" rel="alternate" title="Arquillian blog Atom feed" type="application/atom+xml" />
    <link href="/stylesheets/screen.css?e0e71a3a85916364d66959de2468e50cc63bbf50" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/r29/html5.js"></script>
    <![endif]-->
    <link href="/favicon.ico" rel="shortcut icon" />
  </head>
  <body class="guide">
    <header class="navbar navbar-fixed-top" id="banner" role="banner">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <div class="g-plusone-slot">
            <div class="g-plusone" data-annotation="none"></div>
          </div>
          <a class="brand" href="/">
            <span class="logo"></span>
            <span class="name">Arquillian</span>
          </a>
          <nav class="nav-collapse" role="navigation">
            <ul class="nav">
              <li><a href="/invasion/">Invasion!</a></li>
              <li><a href="/features/">Features</a></li>
              <li class="active"><a href="/guides/">Guides</a></li>
              <li><a href="/docs/">Docs</a></li>
              <li><a href="/blog/">Blog</a></li>
              <li><a href="/community/">Community</a></li>
              <li><a href="/modules/">Modules</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </header>
    <div id="main" role="main">
      <div id="content-header">
        <div class="container">
          <div class="headline">
            <h1>
              <a href="/guides/">Arquillian Guides</a>
              <small>Designed exclusively to teach you how to use Arquillian to write real tests.</small>
            </h1>
            <div class="directory">
              <a class="guides_menu" href="./" id="guides_menu">
                Guides Index
                <i class="icon-menu-closed"></i>
              </a>
              <div id="guides" style="display: none">
                <a class="guides_menu" href="./">
                  Guides Index
                  <i class="icon-menu-open"></i>
                </a>
                <hr class="clear" />
                <dl class="beg">
                  <dt>First Steps</dt>
                  <dd><a href="/guides/getting_started/">Getting Started</a>
                  <br />
                  <a href="/guides/getting_started/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/getting_started_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/getting_started_el_gr/"><img class="flag" rel="tooltip" src="/images/flags/el_gr.png" title="Ελληνικά (el_gr)" /></a>
                  <a href="/guides/getting_started_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/getting_started_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/getting_started_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/getting_started_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/getting_started_nl/"><img class="flag" rel="tooltip" src="/images/flags/nl.png" title="Nederlands (nl)" /></a>
                  <a href="/guides/getting_started_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/getting_started_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/getting_started_sk/"><img class="flag" rel="tooltip" src="/images/flags/sk.png" title="Slovenčina (sk)" /></a>
                  <a href="/guides/getting_started_sv_se/"><img class="flag" rel="tooltip" src="/images/flags/sv_se.png" title="Svenska (sv_se)" /></a>
                  <a href="/guides/getting_started_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/getting_started_rinse_and_repeat/">Getting Started: Rinse and Repeat</a>
                  <br />
                  <a href="/guides/getting_started_rinse_and_repeat/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/get_started_faster_with_forge/">Get Started Faster with Forge</a></dd>
                  <dd><a href="/guides/shrinkwrap_introduction/">Creating Deployable Archives with ShrinkWrap</a>
                  <br />
                  <a href="/guides/shrinkwrap_introduction/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/shrinkwrap_introduction_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/shrinkwrap_introduction_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/shrinkwrap_introduction_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/shrinkwrap_introduction_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/shrinkwrap_introduction_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/shrinkwrap_introduction_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/shrinkwrap_introduction_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                </dl>
                <dl class="int">
                  <dt>More Coverage</dt>
                  <dd><a href="/guides/testing_java_persistence/">Testing Java Persistence</a>
                  <br />
                  <a href="/guides/testing_java_persistence/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/testing_java_persistence_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/testing_java_persistence_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/testing_java_persistence_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/testing_java_persistence_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/testing_java_persistence_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/functional_testing_using_graphene/">Functional Testing using Drone and Graphene</a></dd>
                  <dd><a href="/guides/testing_in_the_cloud/">Testing in the Cloud</a></dd>
                </dl>
                <dl class="adv">
                  <dt>Enhance</dt>
                  <dd><a href="/guides/developing_a_container_adapter/">Developing a Container Adapter</a></dd>
                </dl>
                <dl class="ref">
                  <dt>Reference</dt>
                  <dd><a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Reference Guide</a></dd>
                  <dd><a href="http://docs.jboss.org/arquillian/aggregate/latest">API &amp; SPI Docs</a></dd>
                  <dd><a href="http://community.jboss.org/wiki/ArquillianMigrationGuides">Migration Guides</a></dd>
                  <dd><a href="http://community.jboss.org/en/arquillian/faq">FAQs</a></dd>
                </dl>
              </div>
            </div>
            <script>$(function() { activateGuideMenuControl() })</script>
          </div>
        </div>
      </div>
      <div class="container" id="guide">
        <div id="content" lang="de">
            <div class="header">
            <div class="titlebar">
            <h2>Testing Java Persistence</h2>
            <div class="btn-group">
              <a class="btn" href="https://github.com/arquillian/arquillian.github.io/edit/develop/guides/testing_java_persistence_de.textile">Edit this file</a>
            </div>
          </div>
            <div class="authors"><strong>Authors:</strong>
          <a href="/community/mojavelinux">Dan Allen</a>, <a href="/community/bartoszmajsak">Bartosz Majsak</a>, <a href="/community/hasalex">Alexis Hassler</a>  <strong style="padding-left: 10px;">Translator:</strong>
          <a href="/community/bennetelli">Bennet Schulz</a>  <strong style="padding-left: 10px;">Language:</strong>
          <img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" />
          <br />
          <strong style="padding-left: 0px;">Tags:</strong>
          jpa, database, persistence, transactions  <strong style="padding-left: 10px;">Last Update:</strong>Sep 15, 2017</div>
            <p>Dieser Guide zeigt dir, wie du Arquillian zum Testen deines Java Persistence (JPA) Layers verwendest. Nach dem Lesen dieses Guides bist du in der Lage:</p>
            <ul>
          	<li>Ein Testarchiv anzulegen, welches den JPA descriptor (persistence.xml) enthält</li>
          	<li>Einen EntityManager und eine UserTransaction in deinen Test zu injizieren</li>
          	<li>Entitäten zu persistieren und sie mit JPSQL und der JPA 2 Criteria API wieder aus der Datenbank zu holen</li>
          	<li>Tests mit verschiedenen JPA Providern auszuführen</li>
          </ul>
            <p>Du wirst sehr schnell herausfinden, dass Arquillian dir einfache Möglichkeiten zum Testen von JPA oder zum einfachen experimentieren an die Hand gibt.<br />
          Der Guide wurde mit dem Ziel erstellt, einfach nachzuvollziehen zu sein und es dir leicht zu machen, zu einem späteren Zeitpunkt auf ihn zurückgreifen zu können.</p>
            </div>
            <h3 id="annahmen">Annahmen</h3>
          <p>Dieser Guide setzt voraus, dass du entweder den <a href="/guides/getting_started">Getting Started</a> Guide oder den <a href="/guides/get_started_faster_with_forge">Get Started Faster with Forge</a> Guide gelesen und bereits eine Arquillian Test Suite in einem Maven Projekt angelegt hast. Natürlich kannst du auch bestehende Java Klassen aus den vorherigen Guides löschen, um Platz für diese Lektion zu machen. Wir werden eine JPA Entity zum Projekt hinzufügen, um einen einfachen Java Persistence (JPA) Test zu schreiben. Von da aus kannst du selbstständig weitermachen und weitere Entitäten testen.</p>
          <p>Die Schritte in diesem Guide basieren auf einem Maven Projekt. Dennoch ist Arquillian nicht an Maven gebunden und kann mit jedem anderen Build Tool verwendet werden. Wir werden die Tests in einem Embedded Glassfish und einer lokalen JBoss AS 7 Instanz laufen lassen. Du kannst aber auch einen anderen Container verwenden. Vorausgesetzt er stellt JPA bereit und wird von Arquillian unterstützt.</p>
          <p class="warning"><span>Das arquillian-weld-ee-embedded Profil kann in diesem Tutorial nicht verwendet werden, da Weld den JPA Service nicht unterstützt (Weld unterstützt lediglich CDI).</span></p>
          <h3 id="ziel">Ziel</h3>
          <p>Wir werden eine Anwendung mit einer (Video) <code>Game</code> Entity und folgenden zwei Feldern anlegen:</p>
          <ul>
          	<li><code>id</code> &#8211; dem Primärschlüssel</li>
          	<li><code>title</code> &#8211; dem Titel des Spiels</li>
          </ul>
          <p>Dazu werden wir einen Test schreiben, der die Beispiel Entity in die Datenbank schreibt und sie anschließend mit Hilfe der JPQL und der JPA 2 Criteria API wieder aus der Datenbank ausliest. Anschließend werden wir folgende drei Schritte durchführen:</p>
          <ul>
          	<li>Beispiel-Entitäten in die Datenbank mit Hilfe de JPA <code>EntityManager</code> persistieren</li>
          	<li>Die Datenbank mit JPQL abfragen</li>
          	<li>Die Datenbank mit der JPA 2 Criteria API abfragen</li>
          </ul>
          <p>Der Quellcode für dieses Tutorial findet sich im&quot;Arquillian examples project&quot;:http://github.com/arquillian/arquillian-examples/tree/master/arquillian-persistence-tutorial auf github. Um es in Aktion zu sehen, musst du nur das folgende Kommando ausführen (und etwas Geduld aufbringen und auf den Download der Maven Abhängigkeiten warten).</p>
          <pre class="command"><code class="command">mvn test</code></pre>
          <p>Lass uns direkt eintauchen und sehen wie es funktioniert.</p>
          <h3 id="projektstruktur">Projektstruktur</h3>
          <p>Kein Grund zur Panik! Hier die Struktur des Projektes:</p>
          <ul class="filetree">
          	<li>src/
          	<ul>
          		<li>main/
          		<ul>
          			<li>java/
          			<ul>
          				<li>org/
          				<ul>
          					<li>arquillian/
          					<ul>
          						<li>example/
          						<ul>
          							<li>Game.java</li>
          						</ul></li>
          					</ul></li>
          				</ul></li>
          			</ul></li>
          			<li>resources/
          			<ul>
          				<li>META-INF/
          				<ul>
          					<li>persistence.xml</li>
          				</ul></li>
          			</ul></li>
          		</ul></li>
          		<li>test/
          		<ul>
          			<li>java/
          			<ul>
          				<li>org/
          				<ul>
          					<li>arquillian/
          					<ul>
          						<li>example/
          						<ul>
          							<li>GamePersistenceTest.java</li>
          						</ul></li>
          					</ul></li>
          				</ul></li>
          			</ul></li>
          			<li>resources/
          			<ul>
          				<li>arquillian.xml</li>
          			</ul></li>
          			<li>resources-glassfish-embedded/
          			<ul>
          				<li>glassfish-resources.xml</li>
          				<li>logging.properties</li>
          				<li>test-persistence.xml</li>
          			</ul></li>
          			<li>resources-jbossas-managed/
          			<ul>
          				<li>test-persistence.xml</li>
          			</ul></li>
          		</ul></li>
          	</ul></li>
          	<li>pom.xml</li>
          </ul>
          <p><code>Game</code> ist die JPA Entität und test-persistence.xml ist eine modifizierte Version der persistence.xml, welche die Persistence Unit unserer Testumgebung angibt. Beachte, dass es zwei Test Ordner mit einer persistence.xml Datei gibt. Eine für jeden Container den wir benutzen werden. Wie du sie auswählst werden wir die später erklären.</p>
          <p>Als einen Best Practice empfehlen wir es, einen dedizierten JPA Deskriptor zu verwenden. Dadurch wird es möglich, verschiedene DataSources für die Produktions- und die Testumgebung zu konfigurieren. Beispielsweise möchten wir in der Testumgebung eine &#8220;drop-and-create-tables&#8221; Strategie verwenden um unser Datenbank Schema zu managen. Wir könnten dadurch auch Datenbank Abfragen in Log Dateien loggen. Diese Einstellungen können in der test-persistence.xml aktiviert werden, ohne die Hauptapplikation anzupassen. Das wirst du gleich im folgenden Code sehen. Die persistence.xml (ohne test- prefix) werden wir unangetastet lassen, da wir sie für die Produktionsumgebung und nicht für die Testumgebung verwenden werden.</p>
          <p>Die <code>Game</code> Entität versehen mit der <code>@Entity</code> Annotation sieht so aus:</p>
          <div class="filename">src/main/resources/org/arquillian/example/Game.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.io.Serializable;&#x000A;import javax.persistence.Entity;&#x000A;import javax.persistence.GeneratedValue;&#x000A;import javax.persistence.Id;&#x000A;import javax.validation.constraints.NotNull;&#x000A;import javax.validation.constraints.Size;</code>&#x000A;&#x000A;<code class="prettify">@Entity&#x000A;public class Game implements Serializable {&#x000A;    private Long id;&#x000A;    private String title;</code>&#x000A;&#x000A;<code class="prettify">    public Game() {}</code>&#x000A;&#x000A;<code class="prettify">    public Game(String title) {&#x000A;        this.title = title;&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @Id @GeneratedValue&#x000A;    public Long getId() {&#x000A;        return id;&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    public void setId(Long id) {&#x000A;        this.id = id;&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @NotNull&#x000A;    @Size(min = 3, max = 50)&#x000A;    public String getTitle() {&#x000A;        return title;&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    public void setTitle(String title) {&#x000A;        this.title = title;&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @Override&#x000A;    public String toString() {&#x000A;        return "Game@" + hashCode() + "[id = " + id + "; title = " + title + "]";&#x000A;    }&#x000A;}</code></pre>
          <p>Der Primärschlüssel wird durch die <code>@Id</code> Annotation an dem Feld angegeben. Die zusätzlichen Spalten werden automatisch anhand der Bean Properties (durch die getter/setter Methoden Konvention) aus den Feldern erzeugt. Um einen explizit Spaltennamen anzugeben, kannst du die <code>@Column</code> Annotation verwenden. Andernfalls wird der Spaltenname aus dem Namen der Getter Methode erzeugt. Dazu wird das &#8220;get&#8221; Prefixes der Methode entfernt und die übrig gebliebenen Zeichen des Methodennamens in Kleinbuchstaben als Spaltenname verwendet (Bsp: aus getTitle() wird der Spaltenname: title).</p>
          <p>Wir verwenden zusätzlich auch noch Standard Bean Validation Annotationen, um Bedingungen an Felder festzulegen und zu garantieren. Im obigen Beispiel muss das Feld title gesetzt und zwischen 3 und 50 Zeichen lang sein. (Hinweis: That würde einen weiteren guten Test ergeben).</p>
          <h3 id="einen_test_schreiben">Einen Test schreiben</h3>
          <p>Die ganze zeit Rede wir von Tests. Lasst uns endlich einen neuen JUnit 4 Arquillian Test Case und einen <code>GamePersistenceTest</code> anlegen und uns vorbereiten, JPA Operationen zu testen. Wir verwenden <a href="http://docs.jboss.org/cdi/spec/1.0/html" title="JSR-299">CDI</a> um an die benötigten Ressourcen via Dependency Injection zu gelangen. (Alternativ kannst du eine EJB verwenden, um die Transaktion durchzuführen. Dazu kommen wir in einem späteren Guide.)</p>
          <div class="filename">src/test/java/org/arquillian/example/GamePersistenceTest.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.util.List;&#x000A;import javax.inject.Inject;&#x000A;import javax.persistence.EntityManager;&#x000A;import javax.persistence.PersistenceContext;&#x000A;import javax.transaction.UserTransaction;&#x000A;import org.jboss.arquillian.container.test.api.Deployment;&#x000A;import org.jboss.arquillian.junit.Arquillian;&#x000A;import org.jboss.shrinkwrap.api.Archive;&#x000A;import org.jboss.shrinkwrap.api.ShrinkWrap;&#x000A;import org.jboss.shrinkwrap.api.asset.EmptyAsset;&#x000A;import org.jboss.shrinkwrap.api.spec.WebArchive;&#x000A;import org.junit.runner.RunWith;</code>&#x000A;&#x000A;<code class="prettify">@RunWith(Arquillian.class)&#x000A;public class GamePersistenceTest {&#x000A;    @Deployment&#x000A;    public static Archive&lt;?&gt; createDeployment() {&#x000A;        return ShrinkWrap.create(WebArchive.class, "test.war")&#x000A;            .addPackage(Game.class.getPackage())&#x000A;            .addAsResource("test-persistence.xml", "META-INF/persistence.xml")&#x000A;            .addAsWebInfResource(EmptyAsset.INSTANCE, "beans.xml");&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    private static final String[] GAME_TITLES = {&#x000A;        "Super Mario Brothers",&#x000A;        "Mario Kart",&#x000A;        "F-Zero"&#x000A;    };</code>&#x000A;&#x000A;<code class="prettify">    @PersistenceContext&#x000A;    EntityManager em;</code>&#x000A;&#x000A;<code class="prettify">    @Inject&#x000A;    UserTransaction utx;</code>&#x000A;&#x000A;<code class="prettify">    // tests go here&#x000A;}</code></pre>
          <p>Bevor wir zu den Tests kommen, lasst uns von oben nach unten durch den gezeigten Code gehen, um zu verstehen was dort vor sich geht.</p>
          <dl>
          	<dt>@RunWith(Arquillian.class)</dt>
          	<dd>Bringt JUnit dazu, den Test durch den Arquillian Runner ausführen zu lassen. Dadurch kann Arquiillian ein Komponentenmodell für unsere Tests bereitstellen, welches Container Lifecycle Management, Dependency Injection und andere Verbesserungen mit sich bringt. Beachte: Es ist nicht notwendig eine Baissklasse zu erweitern. Dadurch halten wir uns die Tür für mögliche weitere Anwendungszwecke offen.</dd>
          	<dt>@Deployment Methode</dt>
          	<dd>Baut ein &#8220;micro deployment&#8221; Archiv durch Verwendung von <a href="http://jboss.org/shrinkwrap">ShrinkWrap</a>. Arquillian deployt dieses Archiv in dem Container, welches auch den Test Case und zusätzliche Infrastruktur enthält. Danach wird der Test als eine Komponente innerhalb dieser Micro Applikation ausgeführt. Der Inhalb dieses Archives erstellt eine isolierte Umgebung für diesen einen Test.</dd>
          	<dt>GAME_TITLES Konstante</dt>
          	<dd>Die Beispiel Test Daten</dd>
          	<dt>@PersistenceContext EntityManager</dt>
          	<dd>Injiziert den Persistence Context (bzw. den <code>EntityManager</code>) direkt in den Test. just as though the test were a <a href="http://download.oracle.com/javaee/6/api/javax/annotation/ManagedBean.html">managed bean</a>.</dd>
          	<dt>@Inject UserTransaction</dt>
          	<dd>Injiziert eine JTA Transaktion direkt in unseren Test. Bereitgestellt wird uns das durch die CDI Managed Bean aus dem JSR-299.</dd>
          </dl>
          <p>Um eine Überlagerung der Test Logik mit zugehörigem Setup zu vermeiden, werden Interzeptor Methoden eingeführt, die vor und nach der Testausführung ausgeführt werden. Lasst uns einen Blick auf diesen Code werfen.</p>
          <p>Die <code>@Before</code> Methode, welche vor jedem Test aufgerufen wird führt folgende Aufgaben durch:</p>
          <ol>
          	<li>Setzt den Datenbank Zustand zurück, um nicht auf Daten vorheriger Testdurchläufe zurückzugreifen</li>
          	<li>Fügt Beispiel Daten in die Datenbank ein, welche für die Tests benötigt werden</li>
          	<li>beginnt eine Transaktion</li>
          </ol>
          <p>Hier sind die Methoden und das eine Import statement, welche du zum Test Case hinzufügst:</p>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;import org.junit.Before;&#x000A;&lt;!-- clip --&gt;</code>&#x000A;&#x000A;<code class="prettify">@Before&#x000A;public void preparePersistenceTest() throws Exception {&#x000A;    clearData();&#x000A;    insertData();&#x000A;    startTransaction();&#x000A;}</code>&#x000A;&#x000A;<code class="prettify">private void clearData() throws Exception {&#x000A;    utx.begin();&#x000A;    em.joinTransaction();&#x000A;    System.out.println("Dumping old records...");&#x000A;    em.createQuery("delete from Game").executeUpdate();&#x000A;    utx.commit();&#x000A;}</code>&#x000A;&#x000A;<code class="prettify">private void insertData() throws Exception {&#x000A;    utx.begin();&#x000A;    em.joinTransaction();&#x000A;    System.out.println("Inserting records...");&#x000A;    for (String title : GAME_TITLES) {&#x000A;        Game game = new Game(title);&#x000A;        em.persist(game);&#x000A;    }&#x000A;    utx.commit();&#x000A;    // clear the persistence context (first-level cache)&#x000A;    em.clear();&#x000A;}</code>&#x000A;&#x000A;<code class="prettify">private void startTransaction() throws Exception {&#x000A;    utx.begin();&#x000A;    em.joinTransaction();&#x000A;}</code></pre>
          <p>Wir benötigen auch noch eine Methode, um die Transaktion nach jeder Test Methode abzuschließen. Das bedarf natürlich auch eines weiteren imports:</p>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;import org.junit.After;&#x000A;&lt;!-- clip --&gt;</code>&#x000A;&#x000A;<code class="prettify">@After&#x000A;public void commitTransaction() throws Exception {&#x000A;    utx.commit();&#x000A;}</code></pre>
          <p>Arquillian führt die <code>@Before</code> and <code>@After</code> Methoden vor bzw. nach dem Aufruf einer jeden Testmethode innerhalb des Containers aus. Die <code>@Before</code> Methode wird aufgerufen, nachdem die Injizierungen durchgeführt wurden.</p>
          <p>Beachte: Wir haben den <code>EntityManager</code> explizit innerhalb der JTA Transaktion verwendet. Dieser Schritt ist notwendig, da wir zwei Ressourcen unabhängig voneinander verwenden. Falls du JPA innerhalb einer EJB verwendest, könnte das  für dich etwas ungewöhnlich aussehen, da es dort schon automatisch geschieht.</p>
          <h4>Eine Abfrage mit JPQL</h4>
          <p>Hier ist der Test, der sicherstellt, dass wir Beispieldaten mit der JPQL abfragen können. Wir werden ein paar Statements loggen, um zu sehen was geschieht.</p>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;import java.util.List;&#x000A;import org.junit.Test;&#x000A;&lt;!-- clip --&gt;</code>&#x000A;&#x000A;<code class="prettify">@Test&#x000A;public void shouldFindAllGamesUsingJpqlQuery() throws Exception {&#x000A;    // given&#x000A;    String fetchingAllGamesInJpql = "select g from Game g order by g.id";</code>&#x000A;&#x000A;<code class="prettify">    // when&#x000A;    System.out.println("Selecting (using JPQL)...");&#x000A;    List&lt;Game&gt; games = em.createQuery(fetchingAllGamesInJpql, Game.class).getResultList();</code>&#x000A;&#x000A;<code class="prettify">    // then&#x000A;    System.out.println("Found " + games.size() + " games (using JPQL):");&#x000A;    assertContainsAllGames(games);&#x000A;}</code></pre>
          <p>Wir schließen diesen Test mit einem Aufruf der <code>assertContainsAllGames</code> Methode ab. Dabei handelt es sich um eine eigene Assertion, die sicherstellt, dass die zurückgegebene Collection auch alle in der Datenbank gespeicherten Titel enthält.</p>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;import java.util.Arrays;&#x000A;import java.util.Collection;&#x000A;import java.util.HashSet;&#x000A;import java.util.Set;&#x000A;import org.junit.Assert;&#x000A;&lt;!-- clip --&gt;</code>&#x000A;&#x000A;<code class="prettify">private static void assertContainsAllGames(Collection&lt;Game&gt; retrievedGames) {&#x000A;    Assert.assertEquals(GAME_TITLES.length, retrievedGames.size());&#x000A;    final Set&lt;String&gt; retrievedGameTitles = new HashSet&lt;String&gt;();&#x000A;    for (Game game : retrievedGames) {&#x000A;        System.out.println("* " + game);&#x000A;        retrievedGameTitles.add(game.getTitle());&#x000A;    }&#x000A;    Assert.assertTrue(retrievedGameTitles.containsAll(Arrays.asList(GAME_TITLES)));&#x000A;}</code></pre>
          <p>Eine separate Methode für Assertions zu verwenden bietet die folgenden beiden Vorteile:</p>
          <ul>
          	<li>Es erklärt klar, was wir erwartenIt clearly explains what we are expecting</li>
          	<li>Es kann in anderen Tests wiederverwendet werden</li>
          </ul>
          <p>Kommen wir zu einem neuen Feature in JPA 2, der Criteria API!</p>
          <h4>Das JPA 2 Metamodel generieren</h4>
          <p>Um bei der Verwendung der Criteria API alles typsicher zu halten, solltest du idealerweise die JPA 2 Metamodel Klassen referenzieren. Um diese Klassen durch Maven generen zu lassen, müssen wir Maven zuerst mitteilen, dass es in Ordnung ist, das JDK 6 zu verwenden. (Maven ist da etwas stur)</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;build&gt;&#x000A;    &lt;plugins&gt;&#x000A;        &lt;plugin&gt;&#x000A;            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#x000A;            &lt;version&gt;2.3.2&lt;/version&gt;&#x000A;            &lt;configuration&gt;&#x000A;                &lt;source&gt;1.6&lt;/source&gt;&#x000A;                &lt;target&gt;1.6&lt;/target&gt;&#x000A;            &lt;/configuration&gt;&#x000A;        &lt;/plugin&gt;&#x000A;    &lt;/plugins&gt;&#x000A;&lt;/build&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>Außerdem müssen wir Maven so konfigurieren, dass es den JPA 2 Annotation Processor startet. Das geschieht durch Hinzufügen des JPA metamodel Generators als provided dependency innerhalb der pom.xml Datei:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;hibernate-jpamodelgen&lt;/artifactId&gt;&#x000A;    &lt;version&gt;1.2.0.Final&lt;/version&gt;&#x000A;    &lt;scope&gt;provided&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p class="info"><span>Der metamodel Generator wird automatisch starten wenn du einen JDK 6 Compiler verwendest und das Annotation Processor jar zum Classpath hinzugefügt wurde..</span></p>
          <p>Das JPA 2 Metamodel aus Eclipse heraus zu generieren ist etwas schwieriger. Starte, indem du eine Datei namens .factorypath unterhalb des Projektordners anlegst und füge dort folgende Konfiguration hinzu:</p>
          <div class="filename">.factorypath</div>
          <pre class="prettify"><code class="prettify">&lt;factorypath&gt;&#x000A;    &lt;factorypathentry kind="VARJAR" enabled="true" runInBatchMode="false"&#x000A;        id="M2_REPO/org/hibernate/hibernate-jpamodelgen/1.2.0.Final/hibernate-jpamodelgen-1.2.0.Final.jar"/&gt;&#x000A;    &lt;factorypathentry kind="VARJAR" enabled="true" runInBatchMode="false"&#x000A;        id="M2_REPO/org/hibernate/javax/persistence/hibernate-jpa-2.0-api/1.0.0.Final/hibernate-jpa-2.0-api-1.0.0.Final.jar"/&gt;&#x000A;&lt;/factorypath&gt;</code></pre>
          <p>Jetzt mache einen Rechts-Klick auf das Projekt und wähle Properties aus. Klappe den Java Compiler Knoten im Settings Tree auf und wähle Annotation Processing aus. Dort änderst du folgende Werte:</p>
          <ul>
          	<li>Wähle &#8220;Enable project specific settings&#8221; aus</li>
          	<li>Wähle &#8220;Enable annotation processing&#8221; aus</li>
          	<li>Setze &#8220;Generated source directory&#8221; auf &#8220;target/generated-sources/annotations&#8221; (ohne Anführungsstriche)</li>
          	<li>Klicke auf den Apply Button and Akzeptiere den Full Build</li>
          	<li>Entferne den Haken bei &#8220;Enable annotation processing&#8221;</li>
          	<li>Klicke auf dne Apply button und überspringe den Full Build</li>
          	<li>Wähle &#8220;Enable annotation processing&#8221; aus</li>
          	<li>Wähle den Apply Button aus und führe einen Full Build durch</li>
          </ul>
          <p>Jetzt solltest du die Datei <code>Game_.java</code> im Ordner mit dem Pfad target/generated-sources/annotations finden.</p>
          <p class="info"><span>Ja, du musst damit etwas herumhantieren und es gerade biegen. Genauso wie ein Snack Automat, der vorher einmal leicht getreten werden muss bis er Snacks ausspuckt ~:) Falls es dir zu viele Schwierigkeiten bereitet, kannst du die Metamodel Generierung überspringen und die Spaltennamen mit Strings angeben.</span></p>
          <p>Jetzt bist du auf jeden Fall in der Lage, eine Criteria Query zu schreiben!</p>
          <h4>Abfragen mit der Critiera API</h4>
          <p>Hier ist eine Kopie des vorherigen Tests, der um die Verwendung der Criteria API angepasst wurde. Beachte, dass dieser Test vom JPA 2 annotation processor abhängt, der die <code>Game_</code> metamodel Klasse während des build compilation Schrittes erzeugt.</p>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;import javax.persistence.criteria.CriteriaBuilder;&#x000A;import javax.persistence.criteria.CriteriaQuery;&#x000A;import javax.persistence.criteria.Root;&#x000A;&lt;!-- clip --&gt;</code>&#x000A;&#x000A;<code class="prettify">@Test&#x000A;public void shouldFindAllGamesUsingCriteriaApi() throws Exception {&#x000A;    // given&#x000A;    CriteriaBuilder builder = em.getCriteriaBuilder();&#x000A;    CriteriaQuery&lt;Game&gt; criteria = builder.createQuery(Game.class);</code>&#x000A;&#x000A;<code class="prettify">    Root&lt;Game&gt; game = criteria.from(Game.class);&#x000A;    criteria.select(game);&#x000A;    // TIP: If you don't want to use the JPA 2 Metamodel,&#x000A;    // you can change the get() method call to get("id")&#x000A;    criteria.orderBy(builder.asc(game.get(Game_.id)));&#x000A;    // No WHERE clause, which implies select all</code>&#x000A;&#x000A;<code class="prettify">    // when&#x000A;    System.out.println("Selecting (using Criteria)...");&#x000A;    List&lt;Game&gt; games = em.createQuery(criteria).getResultList();</code>&#x000A;&#x000A;<code class="prettify">    // then&#x000A;    System.out.println("Found " + games.size() + " games (using Criteria):");&#x000A;    assertContainsAllGames(games);&#x000A;}</code></pre>
          <p>Um JPA zum Laufen zu bekommen benötigen wir zusätzlich noch eine Persistence Unit.</p>
          <p>Eine Persistence Unit wird in einer test-persistence.xml Datei angelegt, welche zum zugehörigen Ziel-Container gehört. ShrinkWrap bezieht diese Datei aus dem Classpath und fügt sie zur Standard Location innerhalb des Arhiv hinzu.</p>
          <pre class="prettify"><code class="prettify">.addAsResource("test-persistence.xml", "META-INF/persistence.xml")</code></pre>
          <p>Hier ist die Stuktur des Archives, welches ShwinkWrap uns für diesen Test Case zusammenstellen wird (ohne die Arquillian Infrastruktur):</p>
          <ul class="filetree">
          	<li>WEB-INF/
          	<ul>
          		<li>beans.xml</li>
          		<li>classes/
          		<ul>
          			<li>META-INF/
          			<ul>
          				<li>persistence.xml</li>
          			</ul></li>
          			<li>org/
          			<ul>
          				<li>arquillian/
          				<ul>
          					<li>example/
          					<ul>
          						<li>Game.class</li>
          						<li>GamePersistenceTestCase.class</li>
          						<li>Game_.class</li>
          					</ul></li>
          				</ul></li>
          			</ul></li>
          		</ul></li>
          		<li>lib/
          		<ul>
          			<li>*.jar</li>
          		</ul></li>
          	</ul></li>
          </ul>
          <p>Lasst uns den Persistence Unit Deskriptor ansehen, den wir in dem Test verwenden. Wir beginnen mit dem Embedded GlassFish.</p>
          <h3 id="setup_persistence_for_glassfish">Setup Persistence for GlassFish</h3>
          <p>Hier ist der Persistence Unit Deskriptor, den wir für den Embedded GlassFish verwenden:</p>
          <div class="filename">src/test/resources-glassfish-embedded/test-persistence.xml</div>
          <pre class="prettify"><code class="prettify">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#x000A;&lt;persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://java.sun.com/xml/ns/persistence&#x000A;        http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"&gt;&#x000A;    &lt;persistence-unit name="test"&gt;&#x000A;        &lt;jta-data-source&gt;jdbc/arquillian&lt;/jta-data-source&gt;&#x000A;        &lt;properties&gt;&#x000A;            &lt;property name="eclipselink.ddl-generation" value="drop-and-create-tables"/&gt;&#x000A;            &lt;property name="eclipselink.logging.level.sql" value="FINE"/&gt;&#x000A;            &lt;property name="eclipselink.logging.parameters" value="true"/&gt;&#x000A;        &lt;/properties&gt;&#x000A;    &lt;/persistence-unit&gt;&#x000A;&lt;/persistence&gt;</code></pre>
          <p>Wir setzen die zwei folgenden EclipseLink spezifischen Properties:</p>
          <dl>
          	<dt>eclipselink.ddl-generation</dt>
          	<dd>Konfiguriert das Datenbank Schema Kommando. Der Wert drop-and-create-tables sagt EclipseLink, dass es die Datenbank anhand der annotierten JPA Entitäten erzeugt.</dd>
          	<dt>eclipselink.logging.level.sql</dt>
          	<dd>Konfiguriert das Logging von Queries. Der Wert FINE aktiviert das Logging von SQL Statements, um die Datenbank Aktivitäten zu kontrollieren.</dd>
          </dl>
          <p>EclipseLink Logging muss noch weiter konfiguriert werden, indem du das Logging Level in der Java Konfigurations Datei auf FINE setzt.</p>
          <div class="filename">src/test/resources-glassfish-embedded/logging.properties</div>
          <pre class="prettify"><code class="prettify">handlers=java.util.logging.ConsoleHandler&#x000A;java.util.logging.ConsoleHandler.formatter=java.util.logging.SimpleFormatter&#x000A;java.util.logging.SimpleFormatter.format=%4$s: %5$s%n&#x000A;java.util.logging.ConsoleHandler.level=FINEST</code></pre>
          <p>Die Persistence Unit ist test-persistence.xml und zeigt auf eine DataSource mit dem Namen jdbc/arquillian. Wo ist das angelegt? Das ist etwas, was der Arquillian Container Adapter angeben muss.</p>
          <p>Wir möchten mit Hilfe der GlassFish APIs einen JDBC Connection Pool und zugehörige Rssourcen anlegen. Allerdings möchten wir damit keinen Code schreiben. Wir möchten es lediglich anlegen. An dieser Stelle kommt Aequillian ins Spiel.</p>
          <p>Als erstes erstellen wir eine glassfish-resources.xml Datei, die die Resource Definitionen enthält.</p>
          <div class="filename">src/test/resources-glassfish-embedded/glassfish-resources.xml</div>
          <pre class="prettify"><code class="prettify">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#x000A;&lt;!DOCTYPE resources PUBLIC&#x000A;    "-//GlassFish.org//DTD GlassFish Application Server 3.1 Resource Definitions//EN"&#x000A;    "http://glassfish.org/dtds/glassfish-resources_1_5.dtd"&gt;&#x000A;&lt;resources&gt;&#x000A;    &lt;jdbc-resource pool-name="ArquillianEmbeddedDerbyPool"&#x000A;        jndi-name="jdbc/arquillian"/&gt;&#x000A;    &lt;jdbc-connection-pool name="ArquillianEmbeddedDerbyPool"&#x000A;        res-type="javax.sql.DataSource"&#x000A;        datasource-classname="org.apache.derby.jdbc.EmbeddedDataSource"&#x000A;        is-isolation-level-guaranteed="false"&gt;&#x000A;        &lt;property name="databaseName" value="target/databases/derby"/&gt;&#x000A;        &lt;property name="createDatabase" value="create"/&gt;&#x000A;    &lt;/jdbc-connection-pool&gt;&#x000A;&lt;/resources&gt;</code></pre>
          <p>Nun haben wir die DataSource Definition vom Test getrennt. So wie wir es auch in unserer produktiven Applikation machen. Ein Vorteil davon ist, dass wir alle für den Test benötigten Ressourcen so anlegen können. Stell dir die Möglichkeiten vor.</p>
          <p>Jetzt müssen wir Arquillian noch sagen, dass er dieses Datei verwenden soll. Wir öffnen die Arquillian Konfiguration und konfigurieren den Embedded GlassFish Container Adapter so, dass er diese Datei verwendet und das <code>add-resources</code> Kommando der GlassFish administration API bedient.</p>
          <div class="filename">src/test/resources/arquillian.xml</div>
          <pre class="prettify"><code class="prettify">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#x000A;&lt;arquillian xmlns="http://jboss.org/schema/arquillian"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://jboss.org/schema/arquillian&#x000A;        http://jboss.org/schema/arquillian/arquillian_1_0.xsd"&gt;&#x000A;    &lt;container qualifier="glassfish-embedded" default="true"&gt;&#x000A;        &lt;configuration&gt;&#x000A;            &lt;property name="resourcesXml"&gt;&#x000A;                src/test/resources-glassfish-embedded/glassfish-resources.xml&#x000A;            &lt;/property&gt;&#x000A;        &lt;/configuration&gt;&#x000A;    &lt;/container&gt;&#x000A;&lt;/arquillian&gt;</code></pre>
          <p>Alternativ kannst du die DataSource Konfiguration auch einfach überspringen und folgende Werte in die test-persistence.xml Datei eintragen:</p>
          <pre class="prettify"><code class="prettify">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#x000A;&lt;persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://java.sun.com/xml/ns/persistence&#x000A;        http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"&gt;&#x000A;    &lt;persistence-unit name="test"&gt;&#x000A;        &lt;properties&gt;&#x000A;            &lt;property name="javax.persistence.jdbc.driver"&#x000A;                value="org.apache.derby.jdbc.EmbeddedDriver"/&gt;&#x000A;            &lt;property name="javax.persistence.jdbc.url"&#x000A;                value="jdbc:derby:target/databases/derby;create=true"/&gt;&#x000A;            &lt;property name="eclipselink.ddl-generation" value="drop-and-create-tables"/&gt;&#x000A;            &lt;property name="eclipselink.logging.level.sql" value="FINE"/&gt;&#x000A;            &lt;property name="eclipselink.logging.parameters" value="true"/&gt;&#x000A;        &lt;/properties&gt;&#x000A;    &lt;/persistence-unit&gt;&#x000A;&lt;/persistence&gt;</code></pre>
          <p>Beachte, dass ein Wechsel von einer JNDI DataSource zu einer expliziten Datenbankverbindung die Architektur zwischen der produktions- und der Testumgebung massiv verändert. Das führt dazu, dass du weniger Sicherheit hast, dass dein Test alle möglichen Fehler aufdeckt.</p>
          <p>Was jetzt nur noch fehlt, ist das Setup des Container Adapters und die Ausführung der Tests.</p>
          <h3 id="bereite_den_test_f&#252;r_den_glassfish_vor">Bereite den Test für den GlassFish vor</h3>
          <p>Wir werden den Ziel Container mit Maven profiles voneinander trennen. Alle Maven profile verwenden die selben gemeinsamen Abhängigkeiten (wie im <a href="/guides/getting_started/">Getting Started</a> guide):</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependencyManagement&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.arquillian&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;arquillian-bom&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.0.0.Final&lt;/version&gt;&#x000A;            &lt;scope&gt;import&lt;/scope&gt;&#x000A;            &lt;type&gt;pom&lt;/type&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/dependencyManagement&gt;&#x000A;&lt;dependencies&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;        &lt;version&gt;4.8.1&lt;/version&gt;&#x000A;    &lt;/dependency&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;org.jboss.arquillian.junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;arquillian-junit-container&lt;/artifactId&gt;&#x000A;        &lt;scope&gt;test&lt;/scope&gt;&#x000A;    &lt;/dependency&gt;&#x000A;&lt;/dependencies&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p class="warning"><span>Falls du eine Datenbank (z.B. MySQL) verwenden möchtest, die nicht schon mit dem Application Server mitgeliefert wird, musst du die Client Bibliotheken ebenfalls zum Classpath hinzufügen.<br />
          Wirf einen Blick auf das <a href="http://github.com/arquillian/arquillian-examples/tree/master/arquillian-persistence-tutorial">Beispielprojekt</a> um ein Beispiel für die Verwendung der H2 Datenbank anstelle der mitgelieferten Derby Datenbank zu bekommen.</span></p>
          <p>Jetzt füge (oder ändere) das Profil für den Embedded Glassfish:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;profile&gt;&#x000A;    &lt;id&gt;arquillian-glassfish-embedded&lt;/id&gt;&#x000A;    &lt;activation&gt;&#x000A;        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;&#x000A;    &lt;/activation&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;arquillian-glassfish-embedded-3.1&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.0.0.CR3&lt;/version&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.glassfish.main.extras&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;glassfish-embedded-web&lt;/artifactId&gt;&#x000A;            &lt;version&gt;3.1.2&lt;/version&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;    &lt;build&gt;&#x000A;        &lt;testResources&gt;&#x000A;            &lt;testResource&gt;&#x000A;                &lt;directory&gt;src/test/resources&lt;/directory&gt;&#x000A;            &lt;/testResource&gt;&#x000A;            &lt;testResource&gt;&#x000A;                &lt;directory&gt;src/test/resources-glassfish-embedded&lt;/directory&gt;&#x000A;            &lt;/testResource&gt;&#x000A;        &lt;/testResources&gt;&#x000A;        &lt;plugins&gt;&#x000A;            &lt;plugin&gt;&#x000A;                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;&#x000A;                &lt;version&gt;2.12&lt;/version&gt;&#x000A;                &lt;configuration&gt;&#x000A;                    &lt;systemPropertyVariables&gt;&#x000A;                        &lt;java.util.logging.config.file&gt;&#x000A;                            ${project.build.testOutputDirectory}/logging.properties&#x000A;                        &lt;/java.util.logging.config.file&gt;&#x000A;                        &lt;derby.stream.error.file&gt;&#x000A;                            ${project.build.directory}/derby.log&#x000A;                        &lt;/derby.stream.error.file&gt;&#x000A;                    &lt;/systemPropertyVariables&gt;&#x000A;                &lt;/configuration&gt;&#x000A;            &lt;/plugin&gt;&#x000A;        &lt;/plugins&gt;&#x000A;    &lt;/build&gt;&#x000A;&lt;/profile&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>Wir fügen den src/test/resources-glassfish-embedded Ordner explizit als resource hinzu, so dass die test-persistence.xml zum Classpath hinzugefügt wird.<br />
          Wir haben außerdem noch das Surefire Plugin konfiguriert, damit es die Java Logging Konfiguration in den geforkten Java Prozess legt, um das SQL Logging zum Laufen zu bekommen. Nun endlich bekommen wir die Derby Log Datei in das build output directory so dass es bei einem clean des Projektes auch wieder verschwindet.</p>
          <p class="info"><span>Falls du nicht mit verschiedenen Container testen möchtest, brauchst du die obige Konfiguration nicht in einem umliegenden profile verpacken.</span></p>
          <h3 id="den_test_auf_dem_glassfish_ausf&#252;hren">Den Test auf dem GlassFish ausführen</h3>
          <p>Wenn alle Schritte durchgeführt sind, kannst du die Tests ausführen, in dem du Run As &gt; JUnit Test in deiner IDE ausführst oder folgendes Maven Kommando aufrufst:</p>
          <pre class="command"><code class="command">$ mvn clean test</code></pre>
          <p>Das Maven Profil für den Embedded Glassfish ist standardmäßig aktiviert (wie die Containeradapter-Konfiguration in arquillian.xml). Ausschnitte des Tests sind unten zu sehen.</p>
          <pre class="output"><code class="output">...&#x000A;Running org.arquillian.example.GamePersistenceTest&#x000A;...&#x000A;INFO: GlassFish Server Open Source Edition 3.1.2 (java_re-private) ...&#x000A;...&#x000A;INFO: command add-resources result: PlainTextActionReporterSUCCESSDescription: add-resources AdminCommandnull&#x000A;    JDBC connection pool ArquillianEmbeddedDerbyPool created successfully.&#x000A;    JDBC resource jdbc/arquillian created successfully.&#x000A;...&#x000A;INFO: WEB0671: Loading application [test] at [/test]&#x000A;...&#x000A;Dumping old records...&#x000A;FINE: DELETE FROM GAME&#x000A;Inserting records...&#x000A;FINE: UPDATE SEQUENCE SET SEQ_COUNT = SEQ_COUNT + ? WHERE SEQ_NAME = ?&#x000A;   bind =&gt; [50, SEQ_GEN]&#x000A;FINE: SELECT SEQ_COUNT FROM SEQUENCE WHERE SEQ_NAME = ?&#x000A;   bind =&gt; [SEQ_GEN]&#x000A;FINE: INSERT INTO GAME (ID, TITLE) VALUES (?, ?)&#x000A;   bind =&gt; [3, F-Zero]&#x000A;FINE: INSERT INTO GAME (ID, TITLE) VALUES (?, ?)&#x000A;   bind =&gt; [1, Super Mario Brothers]&#x000A;FINE: INSERT INTO GAME (ID, TITLE) VALUES (?, ?)&#x000A;   bind =&gt; [2, Mario Kart]&#x000A;Selecting (using JPQL)...&#x000A;FINE: SELECT ID, TITLE FROM GAME ORDER BY ID ASC&#x000A;Found 3 games (using JPQL):&#x000A;* Game@599290122[id = 1; title = Super Mario Brothers]&#x000A;* Game@1550721071[id = 2; title = Mario Kart]&#x000A;* Game@1107500305[id = 3; title = F-Zero]&#x000A;FINE: DELETE FROM GAME&#x000A;Inserting records...&#x000A;FINE: INSERT INTO GAME (ID, TITLE) VALUES (?, ?)&#x000A;   bind =&gt; [5, Mario Kart]&#x000A;FINE: INSERT INTO GAME (ID, TITLE) VALUES (?, ?)&#x000A;   bind =&gt; [6, F-Zero]&#x000A;FINE: INSERT INTO GAME (ID, TITLE) VALUES (?, ?)&#x000A;   bind =&gt; [4, Super Mario Brothers]&#x000A;Selecting (using Criteria)...&#x000A;FINE: SELECT ID, TITLE FROM GAME ORDER BY ID ASC&#x000A;Found 3 games (using Criteria):&#x000A;* Game@1020493092[id = 4; title = Super Mario Brothers]&#x000A;* Game@1622992302[id = 5; title = Mario Kart]&#x000A;* Game@294335520[id = 6; title = F-Zero]&#x000A;...</code></pre>
          <p><strong>Glückwunsch!</strong> <strong class="greenbar">Green bar</strong>! <em>Jetzt ist es ein richtiger Integrationstest!</em></p>
          <p class="important"><span>Sobald du fortgeschrittene JPA Mappings wie zum Beispiel <em>lazy loading</em> oder <em>fetch groups</em> einfügst, könntest du in Fehler oder Warnungen laufen, die durch Störungen zwischen dem Embedded GlassFish und dem notwendigen <em>Weaving_-Schritt in EclipseLink hervorgerufen werden. Zusätzliche Buildkonfiguration ist nötig, um dieses Problem zu beheben. Wende dich für Anweisungen an <a href="http://blog.eisele.net/2012/01/arquillian-with-netbeans-glassfish">Markus Eisele&#8217;s blog</a></em>18.html. Dieses Problem tritt bei der Verwendung eines Managed oder Remote Containeradapters nicht auf.</span></p>
          <h3 id="dem_test_auf_dem_jboss_as_7_ausf&#252;hren">Dem Test auf dem JBoss AS 7 ausführen</h3>
          <p>Den vorherigen Test können wir auch mit ein paar einfachen Classpath Änderungen auf dem JBoss ausführen.</p>
          <p>Zunächst benötigen wir eine andere Persistence Unit Definition, die eine in JBoss AS verfügbare DataSource festlegt (und optionalerweise Hibernate-Konfigurationseinstellungen).</p>
          <p>Falls du JBoss AS 7.0 verwendenden würdest, müsstest du <a href="https://docs.jboss.org/author/display/AS7/Admin+Guide#AdminGuide-Datasources">eine DataSource manuell in der JBoss AS Konfiguration aufsetzen</a> oder die eingebaute DataSource aushebeln. Hier ist der Persistence Unit Deskriptor für JBoss AS 7.0, der die eingebaute DataSource verwendet.</p>
          <div class="filename">src/test/resources-jbossas-managed/test-persistence.xml</div>
          <pre class="prettify"><code class="prettify">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#x000A;&lt;persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://java.sun.com/xml/ns/persistence&#x000A;        http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"&gt;&#x000A;    &lt;persistence-unit name="test"&gt;&#x000A;        &lt;jta-data-source&gt;java:jboss/datasources/ExampleDS&lt;/jta-data-source&gt;&#x000A;        &lt;properties&gt;&#x000A;            &lt;property name="hibernate.hbm2ddl.auto" value="create-drop"/&gt;&#x000A;            &lt;property name="hibernate.show_sql" value="true"/&gt;&#x000A;        &lt;/properties&gt;&#x000A;    &lt;/persistence-unit&gt;&#x000A;&lt;/persistence&gt;</code></pre>
          <p>Die Hibernate spezifischen Properties hibernate.hbm2ddl.auto und hibernate.show_sql führen genau die gleichen Funktionen aus wie die zuvor beschriebenen EclipseLink Properties.</p>
          <p>Falls du JBoss AS 7.1 verwendest (was wir empfehlen), dann kannst du neue DataSources dynamisch hinzufügen, in dem du einen DataSource Deskriptor (eine Datei mit der Endung -ds.xml) mit einer oder mehreren DataSource Definitionen zum META-INF Ordner des Java Archives oder des WEB-INF Ordners des Web Archives hinzufügst.</p>
          <p>Hier der Deskriptor, der eine H2 Datenbank mit dem JNDI Namen jdbc/arquillian anlegt (gleicher JNDI Name wie zuvor beim Glassfish):</p>
          <div class="filename">src/test/resources/jbossas-ds.xml</div>
          <pre class="prettify"><code class="prettify">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#x000A;&lt;datasources xmlns="http://www.jboss.org/ironjacamar/schema"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://www.jboss.org/ironjacamar/schema&#x000A;        http://docs.jboss.org/ironjacamar/schema/datasources_1_0.xsd"&gt;&#x000A;    &lt;datasource enabled="true"&#x000A;        jndi-name="jdbc/arquillian"&#x000A;        pool-name="ArquillianEmbeddedH2Pool"&gt;&#x000A;        &lt;connection-url&gt;jdbc:h2:mem:arquillian;DB_CLOSE_DELAY=-1&lt;/connection-url&gt;&#x000A;        &lt;driver&gt;h2&lt;/driver&gt;&#x000A;    &lt;/datasource&gt;&#x000A;&lt;/datasources&gt;</code></pre>
          <p class="info"><span>JBoss AS 7.1 bringt von Haus aus die H2 Datenbank mit. Um eine andere Datenbank zu verwenden, musst du den jeweiligen Treiber zur Installation hinzufügen (wie im <a href="https://docs.jboss.org/author/display/AS71/Admin+Guide#AdminGuide-Datasources">DataSources Kapitel des JBoss AS 7.1 Reference Guides</a> beschrieben.</span></p>
          <p>Wir müssen unsere Persistence Unit anpassen, um die neue DataSource zu verwenden:</p>
          <div class="filename">src/test/resources-jbossas-managed/test-persistence.xml</div>
          <pre class="prettify"><code class="prettify">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#x000A;&lt;persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://java.sun.com/xml/ns/persistence&#x000A;        http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"&gt;&#x000A;    &lt;persistence-unit name="test"&gt;&#x000A;        &lt;jta-data-source&gt;jdbc/arquillian&lt;/jta-data-source&gt;&#x000A;        &lt;properties&gt;&#x000A;            &lt;property name="hibernate.hbm2ddl.auto" value="create-drop"/&gt;&#x000A;            &lt;property name="hibernate.show_sql" value="true"/&gt;&#x000A;        &lt;/properties&gt;&#x000A;    &lt;/persistence-unit&gt;&#x000A;&lt;/persistence&gt;</code></pre>
          <p>Zusätzlich müssen wir den Deskriptor zum WEB-INF Ordner des Testarchivs hinzufügen. Dazu füge einfach die folgende Methode zum ShrinkWrap Builder in der <code>@Deployment</code> Methode des Testfalls hinzu:</p>
          <pre class="prettify"><code class="prettify">.addAsWebInfResource("jbossas-ds.xml")</code></pre>
          <p>Das Hinzufügen dieser Datei hat keinerlei Einfluss auf das Ausführen der Tests auf einem Embedded Glassfish. Die Datasource und die Persistence Unit sind schon bereits einsatzbereit.</p>
          <p>Als nächstes werden wir ein Maven Profil anlegen, welches den JBoss AS Container Adapter und den JBoss AS Ressourcen Ordner zum Classpath hinzufügt:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;profile&gt;&#x000A;    &lt;id&gt;arquillian-jbossas-managed&lt;/id&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.as&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;jboss-as-arquillian-container-managed&lt;/artifactId&gt;&#x000A;            &lt;version&gt;7.1.1.Final&lt;/version&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;         &lt;dependency&gt;&#x000A;             &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;             &lt;artifactId&gt;jboss-javaee-web-6.0&lt;/artifactId&gt;&#x000A;             &lt;version&gt;3.0.0.Final&lt;/version&gt;&#x000A;             &lt;type&gt;pom&lt;/type&gt;&#x000A;             &lt;scope&gt;provided&lt;/scope&gt;&#x000A;             &lt;exclusions&gt;&#x000A;                 &lt;exclusion&gt;&#x000A;                     &lt;groupId&gt;xalan&lt;/groupId&gt;&#x000A;                     &lt;artifactId&gt;xalan&lt;/artifactId&gt;&#x000A;                 &lt;/exclusion&gt;&#x000A;             &lt;/exclusions&gt;&#x000A;         &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;    &lt;build&gt;&#x000A;        &lt;testResources&gt;&#x000A;            &lt;testResource&gt;&#x000A;                &lt;directory&gt;src/test/resources&lt;/directory&gt;&#x000A;            &lt;/testResource&gt;&#x000A;            &lt;testResource&gt;&#x000A;                &lt;directory&gt;src/test/resources-jbossas-managed&lt;/directory&gt;&#x000A;            &lt;/testResource&gt;&#x000A;        &lt;/testResources&gt;&#x000A;    &lt;/build&gt;&#x000A;&lt;/profile&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>Jetzt können wir den Test ein weiteres mal mit Maven starten. Dieses mal aktivieren wir allerdings das JBoss AS managed profile durch:</p>
          <pre class="command"><code class="command">$ mvn clean test -Parquillian-jbossas-managed</code></pre>
          <p class="warning"><span>Stell sicher, dass deine JBOSS_HOME Umgebungsvariable auf eine JBoss AS 7.1.1.Final Installation verweist. Alternativ kannst du den Pfad auch mit der jbossHome Property in der arquillian.xml setzen.</span></p>
          <p>Und das Beste daran ist: Du kannst diesen Test natürlich auch in deiner IDE ausführen! Importiere dazu einfach das Projekt, aktiviere das arquillian-jbossas-managed Maven Profil (und deaktiviere das arquillian-glassfish-embedded Profil), öffne den Testfall und wähle &#8220;Run As &gt; JUnit Test&#8221; aus. Voila! Es läuft! Genau so wie jeder andere normale JUnit Test auch. <strong class="greenbar">Green bar</strong>!</p>
          <p><strong>Genieße diesen klasse Weg zum Testen von JPA!</strong></p>
          <p class="info"><span>WEs befand sich sehr viel Installation in diesem Guide. Beachte allerdings, dass wir auch keinen Stein unangetastet gelassen haben. Um dich an die Vorzüge von Arquillian zu erinnern, betrachte wie einfach der Testfall ist. Erinnere dich daran, dass wir an keinen Java EE 6 Container und keine JPA 2 Implementierung gebunden sind.</span></p>
          <h3 id="share">Share the Knowledge</h3>
          <p>Find this guide useful?</p>
          <p class="post_to_twitter"><a href="http://twitter.com/home/?status=Just%20read%20the%20%23Arquillian%20Testing%20Java%20Persistence%20guide%20and%20got%20a%20%23greenbar!%20Get%20yours.%20http://arquillian.org/guides/testing_java_persistence_de/"><img src="/images/post_to_twitter.png" alt="" /></a></p>
          <div class="g-plusone" data-size="tall"></div>
          <p>There&#8217;s a lot more about Arquillian to cover. If you&#8217;re ready to learn more, check out the <a href="/guides">other available guides</a>.</p>
          <h4>Feedback</h4>
          <p>Find a bug in the guide? Something missing? You can fix it by <a href="http://github.com/arquillian/arquillian.github.com">forking this website</a>, making the correction and <a href="http://help.github.com/send-pull-requests">sending a pull request</a>. If you&#8217;re just plain stuck, feel free to ask a question in the <a href="http://community.jboss.org/en/arquillian?view=discussions">user discussion forum</a>.</p>
          <h4>Recent Changelog</h4>
          <ul>
            <li>
              Sep 15, 2017:
              Fix: translated some english parts to german language (#391)
              <em>by Lukas Körfer</em>
            </li>
            <li>
              Sep 14, 2017:
              Feat: added smart testing as part of a new group &quot;tools&quot; (#393)
              <em>by Matous Jobanek</em>
            </li>
          </ul>
          <p>
            <a href="https://github.com/arquillian/arquillian.github.io/commits/develop/guides/testing_java_persistence_de.textile">See full history &raquo;</a>
          </p>
        </div>
        <div id="sidebar">
          <div id="toc">
            <h3 class="chapter_header">Chapters</h3>
            <ol class="chapters">
              <li>
                <a href="#annahmen" id="annahmen_link">Annahmen</a>
              </li>
              <li>
                <a href="#ziel" id="ziel_link">Ziel</a>
              </li>
              <li>
                <a href="#projektstruktur" id="projektstruktur_link">Projektstruktur</a>
              </li>
              <li>
                <a href="#einen_test_schreiben" id="einen_test_schreiben_link">Einen Test schreiben</a>
              </li>
              <li>
                <a href="#setup_persistence_for_glassfish" id="setup_persistence_for_glassfish_link">Setup Persistence for GlassFish</a>
              </li>
              <li>
                <a href="#bereite_den_test_f&#252;r_den_glassfish_vor" id="bereite_den_test_für_den_glassfish_vor_link">Bereite den Test für den GlassFish vor</a>
              </li>
              <li>
                <a href="#den_test_auf_dem_glassfish_ausf&#252;hren" id="den_test_auf_dem_glassfish_ausführen_link">Den Test auf dem GlassFish ausführen</a>
              </li>
              <li>
                <a href="#dem_test_auf_dem_jboss_as_7_ausf&#252;hren" id="dem_test_auf_dem_jboss_as_7_ausführen_link">Dem Test auf dem JBoss AS 7 ausführen</a>
              </li>
              <li>
                <a href="#share" id="share_link">Share the Knowledge</a>
              </li>
            </ol>
          </div>
        </div>
        <script>
          $(window).load(function() { activateScrollingToc(['annahmen', 'ziel', 'projektstruktur', 'einen_test_schreiben', 'setup_persistence_for_glassfish', 'bereite_den_test_für_den_glassfish_vor', 'den_test_auf_dem_glassfish_ausführen', 'dem_test_auf_dem_jboss_as_7_ausführen', 'share']) })
        </script>
      </div>
    </div>
    <footer>
      <div class="container">
        <div class="project">
          <img src="/images/arquillian_logo_200px.png" />
          <p class="bottom">
            &#169;
            Copyright 2009-2018 Red Hat, Inc.
            <br />
            <i class="icon-fire"></i>
            Mixed with <a href="http://twitter.github.com/bootstrap">Bootstrap</a>. Baked by <a href="http://awestruct.org">Awestruct</a>.
            <br />
            <i class="icon-share-alt"></i>
            Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
            <br />
            Code released under <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>.
          </p>
        </div>
        <div class="footer-nav">
          <h4>Learn</h4>
          <ul>
            <li>
              <a href="/invasion">Mission</a>
            </li>
            <li>
              <a href="/features">Features</a>
            </li>
            <li>
              <a href="/docs">Documentation</a>
            </li>
            <li>
              <a href="/guides">Guides</a>
            </li>
            <li>
              <a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Manual</a>
            </li>
            <li>
              <a href="http://community.jboss.org/en/arquillian/faq">FAQs</a>
            </li>
          </ul>
        </div>
        <div class="footer-nav">
          <h4>Get Involved</h4>
          <ul>
            <li>
              <a href="http://community.jboss.org/en/arquillian?view=discussions">Forums</a>
            </li>
            <li>
              <a href="https://issues.jboss.org/browse/ARQ">Issue Tracker</a>
            </li>
            <li>
              <a href="https://github.com/arquillian">Source Code</a>
            </li>
            <li>
              <a href="/community/contributors">Contributors</a>
            </li>
            <li>
              <a href="https://community.jboss.org/groups/testing">Testing SIG</a>
            </li>
          </ul>
        </div>
        <div class="sponser">
          <div class="follow-us">
            <h4>Stay Informed</h4>
            <ul>
              <li>
                <a href="https://plus.google.com/100660127586085393031?rel=author"><img alt="Google+" src="/images/social/googleplus-16.png" title="Follow Arquillian on Google+" /></a>
              </li>
              <li>
                <a href="https://twitter.com/#!/search/%23arquillian"><img alt="Twitter" src="/images/social/twitter-16.png" title="Browse the #arquillian hashtag on Twitter" /></a>
              </li>
              <li>
                <a href="http://www.linkedin.com/groups?gid=3120340"><img alt="LinkedIn" src="/images/social/linkedin-16.png" title="Join the Arquillian group on LinkedIn" /></a>
              </li>
              <li>
                <a href="http://vimeo.com/channels/arquillian"><img alt="Vimeo" src="/images/social/vimeo-16.png" title="Follow the Arquillian channel on Vimeo" /></a>
              </li>
            </ul>
          </div>
          <p>This website is open source! If you want to improve it, <a href="http://github.com/arquillian/arquillian.github.com">fork the project</a>, hack on it, then send a <a href="https://help.github.com/articles/using-pull-requests">pull request</a>. You can also view the <a href="http://www.seethestats.com/site/arquillian.org">visitor stats</a>.</p>
          <p class="image"><a href="http://jboss.org"><img src="/images/jboss_redhat_branding.png" class="branding" title="Red Hat, Inc." alt="Red Hat, Inc." /></a></p>
          <p>Arquillian is a <a href="http://jboss.org">JBoss Community</a> project and development is sponsored by Red Hat, Inc.</p>
          <p class="bottom"><a href="http://www.redhat.com/legal/legal_statement.html">Terms of Use</a> | <a href="http://www.redhat.com/legal/privacy_statement.html">Privacy Policy</a></p>
        </div>
        <a class="visible-desktop" href="#" id="toTop">Top</a>
      </div>
    </footer>
    <script>
      $(function() {
        $('html').addClass('ready');
        prettify();
        activateFooterGravity();
        activateTooltips();
        activateToTopControl();
      });
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.2/bootstrap.min.js"></script>
    <script src="/javascripts/prettify.js"></script>
    <script src="/javascripts/site.js?3051c796865c2bbf9d38d7df5c0897d5e2bb5033"></script>
    <script src="/javascripts/jquery-scroll.js"></script>
    <script src="http://apis.google.com/js/plusone.js"></script>
    <script>
      (function() {
        var po = document.createElement('script'); po.async = true; po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount','UA-18727998-3']);
    _gaq.push(['_trackPageview']);
    (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
