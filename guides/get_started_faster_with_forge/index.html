<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Get Started Faster with Forge &#183; Arquillian Guides</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Learn how to use JBoss Forge to get started faster with Arquillian and work more efficiently as you develop tests." />
    <link href="/blog/atom.xml" type="application/atom+xml" title="Arquillian blog Atom feed" rel="alternate" />
    <link href="/stylesheets/screen.css?bd6a597285db4e44c754379cff5581dc0b63ca5e" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/r29/html5.js"></script>
    <![endif]-->
    <link href="/favicon.ico" rel="shortcut icon" />
  </head>
  <body class="guide">
    <header class="navbar navbar-fixed-top" id="banner" role="banner">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <div class="g-plusone-slot">
            <div class="g-plusone" data-annotation="none"></div>
          </div>
          <a class="brand" href="/">
            <span class="logo"></span>
            <span class="name">Arquillian</span>
          </a>
          <nav class="nav-collapse" role="navigation">
            <ul class="nav">
              <li><a href="/invasion/">Invasion!</a></li>
              <li><a href="/features/">Features</a></li>
              <li class="active"><a href="/guides/">Guides</a></li>
              <li><a href="/blog/">Blog</a></li>
              <li><a href="/community/">Community</a></li>
              <li><a href="/code/">Code</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </header>
    <div role="main" id="main">
  <div id="content-header">
    <div class="container">
      <div class="headline">
        <h1>
          <a href="/guides/">Arquillian Guides</a>
          <small>Designed exclusively to teach you how to use Arquillian to write real tests.</small>
        </h1>
        <div class="directory">
          <a href="./" class="guides_menu" id="guides_menu">
            Guides Index
            <i class="icon-menu-closed"></i>
          </a>
          <div style="display: none" id="guides">
            <a href="./" class="guides_menu">
              Guides Index
              <i class="icon-menu-open"></i>
            </a>
            <hr class="clear" />
            <dl class="beg">
              <dt>First Steps</dt>
              <dd><a href="/guides/getting_started/">Getting Started</a>
              <br />
              <a href="/guides/getting_started/"><img class="flag" title="English (en)" src="/images/flags/en.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_de/"><img class="flag" title="Deutsch (de)" src="/images/flags/de.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_es/"><img class="flag" title="Español (es)" src="/images/flags/es.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_fr/"><img class="flag" title="Française (fr)" src="/images/flags/fr.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_it/"><img class="flag" title="Italiano (it)" src="/images/flags/it.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_ja/"><img class="flag" title="日本 (ja)" src="/images/flags/ja.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_nl/"><img class="flag" title="Nederlands (nl)" src="/images/flags/nl.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_pl/"><img class="flag" title="Polski (pl)" src="/images/flags/pl.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_pt/"><img class="flag" title="Português (pt)" src="/images/flags/pt.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_sv_se/"><img class="flag" title="Svenska (sv_se)" src="/images/flags/sv_se.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_zh_cn/"><img class="flag" title="简体中文 (zh_cn)" src="/images/flags/zh_cn.png" rel="tooltip" /></a></dd>
              <dd><a href="/guides/getting_started_rinse_and_repeat/">Getting Started: Rinse and Repeat</a>
              <br />
              <a href="/guides/getting_started_rinse_and_repeat/"><img class="flag" title="English (en)" src="/images/flags/en.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_rinse_and_repeat_de/"><img class="flag" title="Deutsch (de)" src="/images/flags/de.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_rinse_and_repeat_es/"><img class="flag" title="Español (es)" src="/images/flags/es.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_rinse_and_repeat_fr/"><img class="flag" title="Française (fr)" src="/images/flags/fr.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_rinse_and_repeat_it/"><img class="flag" title="Italiano (it)" src="/images/flags/it.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_rinse_and_repeat_ja/"><img class="flag" title="日本 (ja)" src="/images/flags/ja.png" rel="tooltip" /></a>
              <a href="/guides/getting_started_rinse_and_repeat_zh_cn/"><img class="flag" title="简体中文 (zh_cn)" src="/images/flags/zh_cn.png" rel="tooltip" /></a></dd>
              <dd><a href="/guides/get_started_faster_with_forge/">Get Started Faster with Forge</a>
              <br />
              <a href="/guides/get_started_faster_with_forge/"><img class="flag" title="English (en)" src="/images/flags/en.png" rel="tooltip" /></a>
              <a href="/guides/get_started_faster_with_forge_de/"><img class="flag" title="Deutsch (de)" src="/images/flags/de.png" rel="tooltip" /></a>
              <a href="/guides/get_started_faster_with_forge_ja/"><img class="flag" title="日本 (ja)" src="/images/flags/ja.png" rel="tooltip" /></a>
              <a href="/guides/get_started_faster_with_forge_zh_cn/"><img class="flag" title="简体中文 (zh_cn)" src="/images/flags/zh_cn.png" rel="tooltip" /></a></dd>
              <dd><a href="/guides/shrinkwrap_introduction/">Creating Deployable Archives with ShrinkWrap</a>
              <br />
              <a href="/guides/shrinkwrap_introduction/"><img class="flag" title="English (en)" src="/images/flags/en.png" rel="tooltip" /></a>
              <a href="/guides/shrinkwrap_introduction_ja/"><img class="flag" title="日本 (ja)" src="/images/flags/ja.png" rel="tooltip" /></a></dd>
            </dl>
            <dl class="int">
              <dt>More Coverage</dt>
              <dd><a href="/guides/testing_java_persistence/">Testing Java Persistence</a>
              <br />
              <a href="/guides/testing_java_persistence/"><img class="flag" title="English (en)" src="/images/flags/en.png" rel="tooltip" /></a>
              <a href="/guides/testing_java_persistence_es/"><img class="flag" title="Español (es)" src="/images/flags/es.png" rel="tooltip" /></a>
              <a href="/guides/testing_java_persistence_fr/"><img class="flag" title="Française (fr)" src="/images/flags/fr.png" rel="tooltip" /></a>
              <a href="/guides/testing_java_persistence_zh_cn/"><img class="flag" title="简体中文 (zh_cn)" src="/images/flags/zh_cn.png" rel="tooltip" /></a></dd>
              <dd><a href="/guides/functional_testing_using_drone/">Functional Testing using Drone</a></dd>
            </dl>
            <dl class="adv">
              <dt>Enhance</dt>
              <dd><a href="/guides/testing_in_the_cloud/">Testing in the Cloud</a></dd>
            </dl>
            <dl class="ref">
              <dt>Reference</dt>
              <dd><a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Reference Guide</a></dd>
              <dd><a href="http://docs.jboss.org/arquillian/api/latest">API Docs</a>,
              <a href="http://docs.jboss.org/arquillian/spi/latest">SPI Docs</a></dd>
              <dd><a href="http://community.jboss.org/wiki/ArquillianMigrationGuides">Migration Guides</a></dd>
              <dd><a href="http://community.jboss.org/en/arquillian/faq">FAQs</a></dd>
            </dl>
          </div>
        </div>
        <script>$(function() { activateGuideMenuControl() })</script>
      </div>
    </div>
  </div>
  <div class="container" id="guide">
    <div id="content">
            <div class="header">
              <div class="header">
              <h2>Get Started Faster with Forge</h2>
              <div class="authors"><strong>Authors:</strong>
   <a href="https://community.jboss.org/people/pbakker">Paul Bakker</a>, <a href="https://community.jboss.org/people/lincolnthree">Lincoln Baxter, III</a>
  <strong style="padding-left: 10px;">Translations:</strong>
  <a href="/guides/get_started_faster_with_forge_de/"><img class="flag" title="Deutsch (de)" src="/images/flags/de.png" rel="tooltip" /></a>
  <a href="/guides/get_started_faster_with_forge_ja/"><img class="flag" title="日本 (ja)" src="/images/flags/ja.png" rel="tooltip" /></a>
  <a href="/guides/get_started_faster_with_forge_zh_cn/"><img class="flag" title="简体中文 (zh_cn)" src="/images/flags/zh_cn.png" rel="tooltip" /></a>
  <br />
  <strong>Level:</strong>
   First Steps
  <strong style="padding-left: 10px;">Last Update:</strong> Apr 30, 2012</div>
              <p>This guide gets you acquainted with the Arquillian plugin for JBoss Forge. After reading this guide, you&#8217;ll be able to:</p>
              <ul>
	<li>Install the Arquillian plugin into your Forge installation</li>
	<li>Use the plugin to add the Arquillian infrastructure to a Maven-based Java project</li>
	<li>Generate a component and corresponding Arquillian test</li>
	<li>Execute the Arquillian test on multiple containers without manual configuration</li>
</ul>
              <p>You&#8217;ll be performing many of the same steps described in the <a href="/guides/getting_started/">Getting Started</a> guide, only you&#8217;ll be letting Forge handle the dirty work for you. We&#8217;ve designed this guide to be a fast read to get you started quicker than ever before!</p>
              </div>
              </div>
            <h3 id="assumptions">Assumptions</h3>
<p>This guide assumes you have <a href="http://jboss.org/forge">JBoss Forge</a> setup. Installing Forge is a relatively short process. Refer to the <a href="/guides/getting_started/">Getting Started</a> guide or the <a href="https://docs.jboss.org/author/display/FORGE/Home">official Forge documentation</a> for download and installation instructions. You&#8217;ll also need <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk-6u29-download-513648.html"><acronym title="Java Development Kit">JDK</acronym> 1.6</a> or higher installed on your machine.</p>
<p class="info"><span>This guide simulates output for a user with a home directory of /home/ike who creates projects in the projects folder and puts applications in the applications folder. Adjust these paths to match your system.</span></p>
<h3 id="create_a_project">Create a Project</h3>
<p>Before we can get started with Arquillian, we first need a project. If you have not created one yet, use the following Forge commands to generate a basic Java EE 6 project that includes CDI.</p>
<pre class="command"><code class="command">$ new-project --named arquillian-demo --topLevelPackage org.arquillian.example</code></pre>
<pre class="output"><code class="output">? Use [/home/ike/projects/arquillian-demo] as project directory? [Y/n]&#x000A;***SUCCESS*** Created project [arquillian-demo] in new working directory [/home/ike/projects/arquillian-demo]&#x000A;Wrote /home/ike/projects/arquillian-demo&#x000A;Wrote /home/ike/projects/arquillian-demo/pom.xml&#x000A;Wrote /home/ike/projects/arquillian-demo/src/main/java&#x000A;Wrote /home/ike/projects/arquillian-demo/src/test/java&#x000A;Wrote /home/ike/projects/arquillian-demo/src/main/resources&#x000A;Wrote /home/ike/projects/arquillian-demo/src/test/resources&#x000A;Wrote /home/ike/projects/arquillian-demo/src/main/java/org/arquillian/example&#x000A;Wrote /home/ike/projects/arquillian-demo/src/main/resources/META-INF/forge.xml</code></pre>
<p>Forge adds the JBoss Community repository to the pom.xml file. This repository is not required to use Arquillian. You can easily remove the repository from the pom.xml file using this Forge command:</p>
<pre class="command"><code class="command">$ project remove-repository http://repository.jboss.org/nexus/content/groups/public </code></pre>
<pre class="output"><code class="output">Removed repository [JBOSS_NEXUS-&gt;http://repository.jboss.org/nexus/content/groups/public]&#x000A;Wrote /home/ike/projects/arquillian-demo/pom.xml</code></pre>
<p>Your new project is now created! Next, we need to create some code to test. Let&#8217;s use Forge to create a new CDI bean.</p>
<p>First, we will install CDI into our project using the beans plugin.</p>
<pre class="command"><code class="command">$ beans setup</code></pre>
<pre class="output"><code class="output">***SUCCESS*** Installed [forge.spec.cdi] successfully.&#x000A;***SUCCESS*** Beans (CDI) is installed.&#x000A;Wrote /home/ike/projects/arquillian-demo/src/main/resources/META-INF/beans.xml&#x000A;Wrote /home/ike/projects/arquillian-demo/pom.xml</code></pre>
<p>Next we will use the plugin to create a new dependent-scoped bean.</p>
<pre class="command"><code class="command">$ beans new-bean --type org.arquillian.example.MySimpleBean --scoped DEPENDENT</code></pre>
<pre class="output"><code class="output">Picked up type &lt;JavaResource&gt;: org.arquillian.example.MySimpleBean&#x000A;Wrote /home/ike/projects/arquillian-demo/src/main/java/org/arquillian/example/MySimpleBean.java</code></pre>
<p>The project now has a component. Switch back to the project root and get ready to test it!</p>
<pre class="command"><code class="command">$ cd ~~</code></pre>
<h3 id="setup_arquillian">Setup Arquillian</h3>
<p>Setting up Arquillian is easy, as you might have seen in the <a href="/guides/getting_started/">Getting Started</a> guide. However, there is a lot of copy/paste work required to setup a new Arquillian container adapter in the pom.xml. Forge can do that for you with a single command!</p>
<p>First you will need to install the <a href="https://github.com/forge/plugin-arquillian">Forge Arquillian plugin</a>.</p>
<pre class="command"><code class="command">$ forge install-plugin arquillian</code></pre>
<pre class="output"><code class="output">Connecting to remote repository [https://raw.github.com/forge/plugin-repository/master/repository.yaml]... connected!&#x000A;***INFO*** Preparing to install plugin: arquillian&#x000A;***INFO*** Checking out plugin source files to [/tmp/forgetemp7898368163271511889/repo] via 'git'&#x000A;...&#x000A;***INFO*** Installing plugin artifact.&#x000A;...&#x000A;***SUCCESS*** Installed from [https://github.com/forge/plugin-arquillian.git] successfully.&#x000A;...</code></pre>
<p>The plugin is ready to use. Now we need to set up Arquillian and a container adapter. We&#8217;ll configure Arquillian to use JBoss AS 7.</p>
<pre class="command"><code class="command">$ arquillian setup --container JBOSS_AS_MANAGED_7.X</code></pre>
<p>Forge will prompt you which version of JUnit, Arquillian and JBoss AS 7 to use. Use the latest final versions for each.</p>
<p>Forge can even download JBoss AS 7 for you automatically, which it prompts for in the setup command:</p>
<pre class="output"><code class="output"> ? Do you want Arquillian to install the container? [y/N]</code></pre>
<dl>
	<dt>If you answer <code>y</code>:</dt>
	<dd>Forge will ask you where you want to install JBoss AS 7 (e.g., /home/ike/applications). Forge then configures the Maven dependency plugin to download and unpack AS 7 to that location (if it&#8217;s not already there) before the tests are run.</dd>
	<dt>If you answer <code>N</code>:</dt>
	<dd>You&#8217;ll need an existing installation of JBoss AS 7 on your machine.</dd>
</dl>
<p>In either case, you need to tell Arquillian where JBoss AS 7 is installed. One way is to set the JBOSS_HOME environment variable to the location where AS 7 is installed. The preferred way is to set the installation path explicitly using the <code>jbossHome</code> container configuration property in the arquillian.xml file. Forge can help us out with that:</p>
<pre class="command"><code class="command">$ arquillian configure-container --profile JBOSS_AS_MANAGED_7.X</code></pre>
<pre class="output"><code class="output">Which property do you want to set?</code>&#x000A;&#x000A;<code class="output">  1 - [Configuration{type='java.lang.String', name='jbossHome', description='The JBoss configuration to start.', defaultValue='$JBOSS_HOME'}]&#x000A;  ...&#x000A; ? Choose an option by typing the number of the selection: 1&#x000A; ? What value do you want to set? /home/ike/applications/jboss-as-7.1.1.Final&#x000A;Wrote /home/ike/projects/arquillian-demo/src/test/resources/arquillian.xml</code></pre>
<p>Here&#8217;s the resulting arquillian.xml file (formatted for clarity):</p>
<div class="filename">src/test/resources/arquillian.xml</div>
<pre class="prettify"><code class="prettify">&lt;arquillian xmlns="http://jboss.org/schema/arquillian"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://jboss.org/schema/arquillian&#x000A;        http://jboss.org/schema/arquillian/arquillian_1_0.xsd"&gt;&#x000A;    &lt;container qualifier="JBOSS_AS_MANAGED_7.X"&gt;&#x000A;        &lt;configuration&gt;&#x000A;            &lt;property name="jbossHome"&gt;/home/ike/applications/jboss-as-7.1.1.Final&lt;/property&gt;&#x000A;        &lt;/configuration&gt;&#x000A;    &lt;/container&gt;&#x000A;&lt;/arquillian&gt;</code></pre>
<p>In order to use this container configuration, you either have to:</p>
<ul>
	<li>Add the attribute <code>default="true"</code> to the <code>&lt;container&gt;</code> element in arquillian.xml</li>
	<li>Write the qualifier <code>JBOSS_AS_MANAGED_7.X</code> as the only contents of the file src/test/resources/arquillian.launch</li>
</ul>
<p>That&#8217;s it! Arquillian is configured and ready to run tests inside JBoss AS 7.</p>
<h3 id="write_a_test">Write a Test</h3>
<p>Now let&#8217;s write a test. Once again, Forge can help you get started quickly.</p>
<pre class="command"><code class="command">$ arquillian create-test --class org.arquillian.example.MySimpleBean.java</code></pre>
<pre class="output"><code class="output">Picked up type &lt;JavaResource&gt;: org.arquillian.example.MySimpleBeanTest&#x000A;Wrote /home/ike/projects/arquillian-demo/src/test/java/org/arquillian/example/MySimpleBeanTest.java</code></pre>
<p>A new test class with a deployment and test method is added to the project.</p>
<div class="filename">src/test/java/org/arquillian/example/MySimpleBeanTest.java</div>
<pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import org.arquillian.example.MySimpleBean;&#x000A;import javax.inject.Inject;&#x000A;import org.jboss.arquillian.container.test.api.Deployment;&#x000A;import org.jboss.arquillian.junit.Arquillian;&#x000A;import org.jboss.shrinkwrap.api.ShrinkWrap;&#x000A;import org.jboss.shrinkwrap.api.spec.JavaArchive;&#x000A;import org.jboss.shrinkwrap.api.asset.EmptyAsset;&#x000A;import org.junit.Assert;&#x000A;import org.junit.Test;&#x000A;import org.junit.runner.RunWith;&#x000A;import static org.junit.Assert.*;&#x000A;import static org.hamcrest.core.Is.*;</code>&#x000A;&#x000A;<code class="prettify">@RunWith(Arquillian.class)&#x000A;public class MySimpleBeanTest {&#x000A;    @Inject private MySimpleBean mysimplebean;</code>&#x000A;&#x000A;<code class="prettify">    @Deployment public static JavaArchive createDeployment() {&#x000A;        return ShrinkWrap.create(JavaArchive.class, "test.jar")&#x000A;            .addClass(MySimpleBean.class)&#x000A;            .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @Test&#x000A;    public void testIsDeployed() {&#x000A;        Assert.assertNotNull(mysimplebean);&#x000A;    }&#x000A;}</code></pre>
<p>As you can see, the test injects the class under test (i.e., <code>MySimpleBean</code>) using CDI, so this will immediately prove if the test really runs in a container.</p>
<p>You can run the test from your IDE, from Maven (outside of Forge) or from Forge itself. Let&#8217;s stick with Forge.</p>
<pre class="command"><code class="command">$ build test --profile JBOSS_AS_MANAGED_7.X</code></pre>
<pre class="output"><code class="output">...&#x000A;-------------------------------------------------------&#x000A;T E S T S&#x000A;-------------------------------------------------------&#x000A;Running org.arquillian.example.MySimpleBeanTest&#x000A;...&#x000A;Results :</code>&#x000A;&#x000A;<code class="output">Tests run: 1, Failures: 0, Errors: 0, Skipped: 0</code></pre>
<p><strong>Congratulations!</strong> You&#8217;ve earned your first <strong class="greenbar">green bar</strong> with Arquillian and JBoss Forge!</p>
<p>Now let&#8217;s try to test some JPA code.</p>
<h3 id="test_persistence">Test Persistence</h3>
<p>Before we can start writing tests that use the Java Persistence API (JPA), we need to configure JPA. We will then create an Entity and a corresponding Data Access Object. These are the classes we will test.</p>
<pre class="command"><code class="command">$ persistence setup --provider HIBERNATE --container JBOSS_AS7</code></pre>
<pre class="output"><code class="output">***SUCCESS*** Installed [forge.spec.jpa] successfully.&#x000A;***INFO*** Setting transaction-type="JTA"&#x000A;***INFO*** Using example data source [java:jboss/datasources/ExampleDS]&#x000A; ? The JPA provider [HIBERNATE], also supplies extended APIs. Install these as well? [y/N] n&#x000A;Wrote /home/ike/projects/arquillian-demo/src/main/resources/META-INF/persistence.xml&#x000A;Wrote /home/ike/projects/arquillian-demo/pom.xml</code></pre>
<p>Now create our entity.</p>
<pre class="command"><code class="command">$ entity --named Language --package org.arquillian.example.domain</code></pre>
<pre class="output"><code class="output">Created @Entity [org.arquillian.example.domain.Language]&#x000A;Picked up type &lt;JavaResource&gt;: org.arquillian.example.domain.Language&#x000A;Wrote /home/ike/projects/arquillian-demo/src/main/java/org/arquillian/example/domain/Language.java</code></pre>
<p>Then add some fields to our entity.</p>
<pre class="command"><code class="command">$ field string --named name</code></pre>
<pre class="output"><code class="output">Added field to org.arquillian.example.domain.Language: @Column private String name;&#x000A;Wrote /home/ike/projects/arquillian-demo/src/main/java/org/arquillian/example/domain/Language.java</code></pre>
<p>If you open the <code>Langauge</code> class, you&#8217;ll see a typical JPA entity structure.</p>
<p>Now we need a Data Access Object (DAO) to manage this entity. Copy this dao class into your project.</p>
<div class="filename">src/main/java/org/arquillian/example/dao/LanguageDao.java</div>
<pre class="prettify"><code class="prettify">package org.arquillian.example.dao;</code>&#x000A;&#x000A;<code class="prettify">import org.arquillian.example.domain.Language;&#x000A;import javax.annotation.PostConstruct;&#x000A;import javax.ejb.Singleton;&#x000A;import javax.ejb.Startup;&#x000A;import javax.persistence.EntityManager;&#x000A;import javax.persistence.PersistenceContext;&#x000A;import java.util.List;</code>&#x000A;&#x000A;<code class="prettify">@Singleton&#x000A;@Startup&#x000A;public class LanguageDao {&#x000A;    @PersistenceContext&#x000A;    EntityManager em;</code>&#x000A;&#x000A;<code class="prettify">    public List&lt;Language&gt; listLanguages() {&#x000A;        return em.createQuery("select l from Language l").getResultList();&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @PostConstruct&#x000A;    public void insertTestData() {&#x000A;        Language java = new Language();&#x000A;        java.setName("Java");&#x000A;        em.persist(java);</code>&#x000A;&#x000A;<code class="prettify">        Language ruby = new Language();&#x000A;        ruby.setName("Ruby");&#x000A;        em.persist(ruby);</code>&#x000A;&#x000A;<code class="prettify">        Language groovy = new Language();&#x000A;        groovy.setName("Groovy");&#x000A;        em.persist(groovy);&#x000A;    }&#x000A;}</code></pre>
<p>To compile this class, you&#8217;ll need to add the EJB APIs to the project.</p>
<pre class="command"><code class="command">$ ejb setup</code></pre>
<pre class="output"><code class="output">***SUCCESS*** Installed [forge.spec.ejb] successfully.&#x000A;***SUCCESS*** Enterprise Java Beans (EJB) is installed.&#x000A;Wrote /home/ike/projects/arquillian-demo/pom.xml</code></pre>
<p>It&#8217;s now time to create our test class. This part should look familiar from the first half of this tutorial, except this time we instruct the <code>create-test</code> command to prepare the test for testing JPA.</p>
<pre class="command"><code class="command">$ arquillian create-test --class org.arquillian.example.dao.LanguageDao.java --enableJPA</code></pre>
<pre class="output"><code class="output">Picked up type &lt;JavaResource&gt;: org.arquillian.example.dao.LanguageDaoTest&#x000A;Wrote /home/ike/projects/arquillian-demo/src/test/java/org/arquillian/example/dao/LanguageDaoTest.java</code></pre>
<p>This again creates a new test, but also adds your persistence.xml to the deployment. Here&#8217;s the test it generated:</p>
<div class="filename">src/test/java/org/arquillian/example/dao/LanguageDaoTest.java</div>
<pre class="prettify"><code class="prettify">package org.arquillian.example.dao;</code>&#x000A;&#x000A;<code class="prettify">import org.arquillian.example.dao.LanguageDao;&#x000A;import javax.inject.Inject;&#x000A;import org.jboss.arquillian.container.test.api.Deployment;&#x000A;import org.jboss.arquillian.junit.Arquillian;&#x000A;import org.jboss.shrinkwrap.api.ShrinkWrap;&#x000A;import org.jboss.shrinkwrap.api.spec.JavaArchive;&#x000A;import org.jboss.shrinkwrap.api.asset.EmptyAsset;&#x000A;import org.junit.Assert;&#x000A;import org.junit.Test;&#x000A;import org.junit.runner.RunWith;&#x000A;import static org.junit.Assert.*;&#x000A;import static org.hamcrest.core.Is.*;</code>&#x000A;&#x000A;<code class="prettify">@RunWith(Arquillian.class)&#x000A;public class LanguageDaoTest {&#x000A;    @Inject private LanguageDao languagedao;</code>&#x000A;&#x000A;<code class="prettify">    @Deployment public static JavaArchive createDeployment() {&#x000A;        return ShrinkWrap.create(JavaArchive.class, "test.jar")&#x000A;            .addClass(LanguageDao.class)&#x000A;            .addAsManifestResource("META-INF/persistence.xml", "persistence.xml")&#x000A;            .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @Test&#x000A;    public void testIsDeployed() {&#x000A;        Assert.assertNotNull(languagedao);&#x000A;    }&#x000A;}</code></pre>
<p>Open the test in your IDE and add the <code>Language</code> entity to the deployment. Add the proper import, then change this line:</p>
<pre class="prettify"><code class="prettify">.addClass(LanguageDao.class)</code></pre>
<p>&#8230;to this one:</p>
<pre class="prettify"><code class="prettify">.addClasses(Language.class, LanguageDao.class)</code></pre>
<p>Now write a new test method to assert the behavior of <code>listLanguages()</code>.</p>
<div class="filename">src/test/java/org/arquillian/example/dao/LanguageDaoTest.java</div>
<pre class="prettify"><code class="prettify">@Test&#x000A;public void testListLanguages() {&#x000A;    Assert.assertEquals(3, languagedao.listLanguages().size());&#x000A;}</code></pre>
<p>Now run the tests.</p>
<pre class="command"><code class="command">$ build test --profile JBOSS_AS_MANAGED_7.X</code></pre>
<p><strong>Congratulations!</strong> Another <strong class="greenbar">green bar</strong> with Arquillian!</p>
<h3 id="add_more_container_adapters">Add More Container Adapters</h3>
<p>Adding more container adapters is as easy as executing the setup command again. For example, let&#8217;s add a Glassfish remote adapter.</p>
<pre class="command"><code class="command">$ arquillian setup --container GLASSFISH_REMOTE_3_1_(REST)</code></pre>
<p>Simply switch between containers by switching the Maven profile. For example in Forge:</p>
<pre class="command"><code class="command">$ build test --profile GLASSFISH_REMOTE_3_1_(REST)</code></pre>
<p class="warning"><span>Some additional setup is required to get this test to work on a standalone GlassFish instance. Call it homework <img class="emoticon" alt=":)" src="/images/emoticons/smile.png" /></span></p>
<h3 id="export_the_deployment">Export the Deployment</h3>
<p>For debugging purposes, it can be useful to export your deployment to a file. You can do so using Forge.</p>
<p>First navigate to an Arquillian test:</p>
<pre class="command"><code class="command">$ cd src/test/java/org/arquillian/example/MySimpleBeanTest.java</code></pre>
<p>Then export the deployment:</p>
<pre class="command"><code class="command">$ arquillian export</code></pre>
<p>You can find the exported archive in the project&#8217;s target directory.</p>
<pre class="command"><code class="command">$ cd ~~&#x000A;$ ls target/*.jar</code></pre>
<pre class="output"><code class="output">arquillian-demo.jar</code></pre>
<p>If you inspect that jar file using an archive program, you&#8217;ll find that it matches the ShrinkWrap archive you defined in the <code>@Deployment</code> method of the test.</p>
  <h3 id="share">Share the Knowledge</h3>
  <p>Find this guide useful?</p>
  <p class="post_to_twitter"><a href="http://twitter.com/home/?status=Just%20read%20the%20%23Arquillian%20Get%20Started%20Faster%20with%20Forge%20guide%20and%20got%20a%20%23greenbar!%20Get%20yours.%20http://arquillian.org/guides/get_started_faster_with_forge/"><img alt="" src="/images/post_to_twitter.png" /></a></p>
  <div class="g-plusone" data-size="tall"></div>
  <p>There&#8217;s a lot more about Arquillian to cover. If you&#8217;re ready to learn more, check out the <a href="/guides">other available guides</a>.</p>
  <h4>Feedback</h4>
  <p>Find a bug in the guide? Something missing? You can fix it by <a href="http://github.com/arquillian/arquillian.github.com">forking this website</a>, making the correction and <a href="http://help.github.com/send-pull-requests">sending a pull request</a>. If you&#8217;re just plain stuck, feel free to ask a question in the <a href="http://community.jboss.org/en/arquillian?view=discussions">user discussion forum</a>.</p>
  <h4>Recent Changelog</h4>
  <ul>
    <li>
      Apr 30, 2012:
      Change tense of headings, remove the word guide from link text
      <em>by Dan Allen</em>
    </li>
    <li>
      Apr 29, 2012:
      Change home directory to /home/ike
      <em>by Dan Allen</em>
    </li>
    <li>
      Apr 29, 2012:
      Correct container configuration instructions for as 7, make headings active tense, rewording
      <em>by Dan Allen</em>
    </li>
    <li>
      Apr 29, 2012:
      Add instructions for using the configure-container command
      <em>by Dan Allen</em>
    </li>
    <li>
      Apr 29, 2012:
      Markup updates
      <em>by Dan Allen</em>
    </li>
    <li>
      Apr 29, 2012:
      Include instructions for configuring jbosshome in arquillian.xml
      <em>by Dan Allen</em>
    </li>
    <li>
      Apr 29, 2012:
      Change working directory in outputs to /home/paul/projects
      <em>by Dan Allen</em>
    </li>
    <li>
      Apr 29, 2012:
      Add instruction to remove the jboss community repository
      <em>by Dan Allen</em>
    </li>
    <li>
      Apr 29, 2012:
      Update guide to arquillian 1.0.0.final and forge 1.0.2.final; change package to org.arquillian.example; show contents of generated classes
      <em>by Dan Allen</em>
    </li>
    <li>
      Apr 05, 2012:
      Use description in prolog for guide summary
      <em>by Dan Allen</em>
    </li>
    <li>
      Feb 10, 2012:
      Identify authors &amp; translators by site identity
      <em>by Dan Allen</em>
    </li>
    <li>
      Nov 18, 2011:
      Change title to &quot;get started faster with forge&quot;
      <em>by Dan Allen</em>
    </li>
  </ul>
  <p>
    <a href="https://github.com/arquillian/arquillian.github.com/commits/develop/guides/get_started_faster_with_forge.textile">See full history &raquo;</a>
  </p>
</div>
<div id="sidebar">
  <div id="toc">
    <h3 class="chapter_header">Chapters</h3>
    <ol class="chapters">
      <li>
        <a href="#assumptions" id="assumptions_link">Assumptions</a>
      </li>
      <li>
        <a href="#create_a_project" id="create_a_project_link">Create a Project</a>
      </li>
      <li>
        <a href="#setup_arquillian" id="setup_arquillian_link">Setup Arquillian</a>
      </li>
      <li>
        <a href="#write_a_test" id="write_a_test_link">Write a Test</a>
      </li>
      <li>
        <a href="#test_persistence" id="test_persistence_link">Test Persistence</a>
      </li>
      <li>
        <a href="#add_more_container_adapters" id="add_more_container_adapters_link">Add More Container Adapters</a>
      </li>
      <li>
        <a href="#export_the_deployment" id="export_the_deployment_link">Export the Deployment</a>
      </li>
      <li>
        <a href="#share" id="share_link">Share the Knowledge</a>
      </li>
    </ol>
  </div>
</div>
<script>
  $(window).load(function() { activateScrollingToc(['assumptions', 'create_a_project', 'setup_arquillian', 'write_a_test', 'test_persistence', 'add_more_container_adapters', 'export_the_deployment', 'share']) })
</script>
  </div>
</div>
    <footer>
      <div class="container">
        <div class="project">
          <img src="/images/arquillian_logo_200px.png" />
          <p class="bottom">
            &#169;
            Copyright 2009-2012 Red Hat, Inc.
            <br />
            <i class="icon-fire"></i>
            Mixed with <a href="http://twitter.github.com/bootstrap">Bootstrap</a>. Baked by <a href="http://awestruct.org">Awestruct</a>.
            <br />
            <i class="icon-share-alt"></i>
            Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
            <br />
            Code released under <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>.
          </p>
        </div>
        <div class="footer-nav">
          <h4>Learn</h4>
          <ul>
            <li>
              <a href="/invasion">Mission</a>
            </li>
            <li>
              <a href="/features">Features</a>
            </li>
            <li>
              <a href="/guides">Guides</a>
            </li>
            <li>
              <a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Manual</a>
            </li>
            <li>
              <a href="http://community.jboss.org/en/arquillian/faq">FAQs</a>
            </li>
          </ul>
        </div>
        <div class="footer-nav">
          <h4>Get Involved</h4>
          <ul>
            <li>
              <a href="http://community.jboss.org/en/arquillian?view=discussions">Forums</a>
            </li>
            <li>
              <a href="https://issues.jboss.org/browse/ARQ">Issue Tracker</a>
            </li>
            <li>
              <a href="https://github.com/arquillian">Source Code</a>
            </li>
            <li>
              <a href="/community/contributors">Contributors</a>
            </li>
            <li>
              <a href="https://community.jboss.org/groups/testing">Testing SIG</a>
            </li>
          </ul>
        </div>
        <div class="sponser">
          <div class="follow-us">
            <h4>Stay Informed</h4>
            <ul>
              <li>
                <a href="https://plus.google.com/100660127586085393031"><img alt="Google+" title="Follow Arquillian on Google+" src="/images/social/googleplus-16.png" /></a>
              </li>
              <li>
                <a href="https://twitter.com/#!/search/%23arquillian"><img alt="Twitter" title="Browse the #arquillian hashtag on Twitter" src="/images/social/twitter-16.png" /></a>
              </li>
              <li>
                <a href="http://www.linkedin.com/groups?gid=3120340"><img alt="LinkedIn" title="Join the Arquillian group on LinkedIn" src="/images/social/linkedin-16.png" /></a>
              </li>
              <li>
                <a href="http://vimeo.com/channels/arquillian"><img alt="Vimeo" title="Follow the Arquillian channel on Vimeo" src="/images/social/vimeo-16.png" /></a>
              </li>
            </ul>
          </div>
          <p>This website is open source! You can also <a href="http://www.seethestats.com/site/arquillian.org">see the stats</a>. If you want to help, <a href="http://github.com/arquillian/arquillian.github.com">fork the project</a> and hack on it.</p>
          <p class="image"><a href="http://jboss.org"><img class="branding" title="Red Hat, Inc." alt="Red Hat, Inc." src="/images/jboss_redhat_branding.png" /></a></p>
          <p>Arquillian is a <a href="http://jboss.org">JBoss Community</a> project and development is sponsored by Red Hat, Inc.</p>
          <p class="bottom"><a href="http://www.redhat.com/legal/legal_statement.html">Terms of Use</a> | <a href="http://www.redhat.com/legal/privacy_statement.html">Privacy Policy</a></p>
        </div>
        <a class="visible-desktop" href="#" id="toTop">Top</a>
      </div>
    </footer>
    <script>
      $(function() {
        $('html').addClass('ready');
        prettify();
        activateFooterGravity();
        activateTooltips();
        activateToTopControl();
      });
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.2/bootstrap.min.js"></script>
    <script src="/javascripts/prettify.js"></script>
    <script src="/javascripts/site.js?bd6a597285db4e44c754379cff5581dc0b63ca5e"></script>
    <script src="/javascripts/jquery-scroll.js"></script>
    <script src="http://apis.google.com/js/plusone.js"></script>
    <script>
      (function() {
        var po = document.createElement('script'); po.async = true; po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount','UA-18727998-3']);
    _gaq.push(['_trackPageview']);
    (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
