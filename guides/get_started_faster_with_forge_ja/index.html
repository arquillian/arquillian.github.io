<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Get Started Faster with Forge &#183; Arquillian</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="Arquillianをすぐに始められるように、またより効率よくテストを作成できるように、JBoss Forgeの使い方を学びます。" name="description" />
    <link href="/stylesheets/screen.css" rel="stylesheet" />
    <script src="//code.jquery.com/jquery-1.7.2.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script src="/javascripts/jquery-scroll.js"></script>
    <script src="http://apis.google.com/js/plusone.js"></script>
  </head>
  <body class="guide">
    <header class="navbar navbar-fixed-top" id="banner" role="banner">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/">
            <span class="logo"></span>
            Arquillian
          </a>
          <nav class="nav-collapse offset4" role="navigation">
            <ul class="nav">
              <li>
                <a href="/invasion/">Invasion!</a>
              </li>
              <li>
                <a href="/features/">Features</a>
              </li>
              <li class="active">
                <a href="/guides/">Guides</a>
              </li>
              <li>
                <a href="/blog/">Blog</a>
              </li>
              <li>
                <a href="/community/">Community</a>
              </li>
              <li>
                <a href="/code/">Code</a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </header>
    <script type="text/javascript">
      //<![CDATA[
        function toggleGuidesMenu(e) {
          if (document.getElementById('guides').style.display == 'none') {
            document.getElementById('guides').style.display = 'block';
            $('body').click(function(e) { toggleGuidesMenu(e); });
          } else {
            document.getElementById('guides').style.display = 'none';
            $('body').unbind('click');
          }
          return false;
        }
        
        $(document).ready(function() {
          $('#guides_menu, .guides_menu').click(toggleGuidesMenu);
        });
      //]]>
    </script>
    <div id="main" role="main">
      <div id="content-header">
        <div class="container">
          <div class="headline">
            <h1>
              <a href="/guides/">Arquillian Guides</a>
              <small>Designed exclusively to teach you how to use Arquillian to write real tests.</small>
            </h1>
            <div class="directory">
              <a class="guides_menu" href="index.html" id="guides_menu">
                Guides Index
                <span class="arrow">&rsaquo;</span>
              </a>
              <div id="guides" style="display: none">
                <a class="guides_menu" href="index.html">
                  Guides Index
                  <span class="arrow">&rsaquo;</span>
                </a>
                <hr class="clear" />
                <dl class="beg">
                  <dt>First Steps</dt>
                  <dd><a href="/guides/getting_started/index.html">Getting Started</a>
                  <a href="/guides/getting_started/index.html"><img class="flag" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/getting_started_de/index.html"><img class="flag" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/getting_started_fr/index.html"><img class="flag" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/getting_started_ja/index.html"><img class="flag" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/getting_started_pl/index.html"><img class="flag" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/getting_started_pt/index.html"><img class="flag" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/getting_started_sv_se/index.html"><img class="flag" src="/images/flags/sv_se.png" title="Svenska (sv_se)" /></a>
                  <a href="/guides/getting_started_zh_cn/index.html"><img class="flag" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/getting_started_rinse_and_repeat/index.html">Getting Started: Rinse and Repeat</a>
                  <a href="/guides/getting_started_rinse_and_repeat/index.html"><img class="flag" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_ja/index.html"><img class="flag" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_zh_cn/index.html"><img class="flag" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/get_started_faster_with_forge/index.html">Get Started Faster with Forge</a>
                  <a href="/guides/get_started_faster_with_forge/index.html"><img class="flag" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/get_started_faster_with_forge_ja/index.html"><img class="flag" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/get_started_faster_with_forge_zh_cn/index.html"><img class="flag" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/shrinkwrap/index.html">Creating Deployable Archives with ShrinkWrap</a>
                  <a href="/guides/shrinkwrap/index.html"><img class="flag" src="/images/flags/en.png" title="English (en)" /></a></dd>
                </dl>
                <dl class="int">
                  <dt>More Coverage</dt>
                  <dd><a href="/guides/testing_java_persistence/index.html">Testing Java Persistence</a>
                  <a href="/guides/testing_java_persistence/index.html"><img class="flag" src="/images/flags/en.png" title="English (en)" /></a></dd>
                  <dd><a href="/guides/functional_testing_using_drone/index.html">Functional Testing using Drone</a>
                  <a href="/guides/functional_testing_using_drone/index.html"><img class="flag" src="/images/flags/en.png" title="English (en)" /></a></dd>
                </dl>
                <dl class="adv">
                  <dt>Enhance</dt>
                  <dd><a href="/guides/testing_in_the_cloud/index.html">Testing in the Cloud</a>
                  <a href="/guides/testing_in_the_cloud/index.html"><img class="flag" src="/images/flags/en.png" title="English (en)" /></a></dd>
                </dl>
                <dl class="ref">
                  <dt>Reference</dt>
                  <dd><a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Manual</a></dd>
                  <dd><a href="http://docs.jboss.org/arquillian/api/latest">API Docs</a>,
                  <a href="http://docs.jboss.org/arquillian/spi/latest">SPI Docs</a></dd>
                  <dd><a href="http://community.jboss.org/en/arquillian/faq">FAQs</a></dd>
                  <dd><a href="http://community.jboss.org/wiki/ArquillianMigrationGuides">Migration Guides</a></dd>
                </dl>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="container" id="guide">
        <div id="content" lang="ja">
            <div class="header">
            <h2>Get Started Faster with Forge</h2>
            <div class="authors"><strong>Authors:</strong>
           Paul Bakker, Lincoln Baxter, Iii
          <strong style="padding-left: 10px;">Translator:</strong>
           Takayuki Konishi
          <strong style="padding-left: 10px;">Language:</strong>
          <img class="flag" src="/images/flags/ja.png" title="日本 (ja)" />
          <br />
          <strong>Level:</strong>
           First Steps
          <strong style="padding-left: 10px;">Last Update:</strong> Feb 10, 2012</div>
            <p>このガイドでは、JBoss ForgeのArquillianプラグインについて解説します。このガイドを読むと、以下のことができるようになります：</p>
            <ul>
          	<li>Forge環境にArquillainプラグインをインストールする</li>
          	<li>このプラグインを使って、MavenベースのJavaプロジェクトに、Arquillianインフラストラクチャを追加する</li>
          	<li>コンポーネントと、対応するArquillianのテストを生成する</li>
          	<li>複数のコンテナで手動設定なしにArquillianテストを実行する</li>
          </ul>
            <p>読者は、 <a href="../getting_started">Getting Started</a> guide で説明されているたくさんの重複したステップを実行しているでしょう。それらの煩雑な作業はForgeに実行させます。このガイドは、これまでのガイドよりも、早く始められるよう、早く読めるように作成しました。</p>
            </div>
            <h3 id="&#21069;&#25552;">前提</h3>
          <p>このガイドは、 <a href="http://jboss.org/forge">JBoss Forge</a> がセットアップ済みであることが前提です。Forgeのインストールは、比較的短い手順です。ダウンロードやインストールの説明は、&quot;Getting Started guide&quot;や <a href="https://docs.jboss.org/author/display/FORGE/Home">official Forge documentation</a> を参照してください。また、 <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk-6u29-download-513648.html"><acronym title="Java Development Kit">JDK</acronym> 1.6</a> 以降が必要です。</p>
          <h3 id="&#12503;&#12525;&#12472;&#12455;&#12463;&#12488;&#12434;&#20316;&#25104;&#12377;&#12427;">プロジェクトを作成する</h3>
          <p>Arquillianを始める前に、プロジェクトが必要です。まだ作成していなければ、以下のForgeのコマンドでJPAを含むシンプルなJava EE 6プロジェクトを作成してください。</p>
          <pre class="command"><code class="command">$ new-project --named arquillian-demo --topLevelPackage demo</code></pre>
          <pre class="output"><code class="output">? Use [/Users/paul/arquillian-demo] as project directory? [Y/n]&#x000A;***SUCCESS*** Created project [arquillian-demo] in new working directory [/Users/paul/arquillian-demo]&#x000A;Wrote /Users/paul/arquillian-demo&#x000A;Wrote /Users/paul/arquillian-demo/pom.xml&#x000A;Wrote /Users/paul/arquillian-demo/src/main/java&#x000A;Wrote /Users/paul/arquillian-demo/src/test/java&#x000A;Wrote /Users/paul/arquillian-demo/src/main/resources&#x000A;Wrote /Users/paul/arquillian-demo/src/test/resources&#x000A;Wrote /Users/paul/arquillian-demo/src/main/resources/META-INF/forge.xml</code></pre>
          <p>新しいプロジェクトが作成されました。次に、テスト対象のコードが必要です。Forgeを使って新しいCDI beanを作成しましょう。</p>
          <p>まず、&quot;beans&quot;プラグインを使って、CDIをプロジェクトにインストールします。</p>
          <pre class="command"><code class="command">$ beans setup</code></pre>
          <pre class="output"><code class="output">***SUCCESS*** Installed [forge.spec.cdi] successfully.&#x000A; ? Do you want to install CDI APIs? [y/N]</code>&#x000A;&#x000A;<code class="output">Wrote /Users/paul/arquillian-demo/src/main/resources/META-INF/beans.xml</code></pre>
          <p>それから、新しいbeanをつくりましょう。</p>
          <pre class="command"><code class="command">$ beans new-bean --type demo.MySimpleBean --scoped DEPENDENT</code></pre>
          <pre class="output"><code class="output">Picked up type &lt;JavaResource&gt;: demo.MySimpleBean&#x000A;Wrote /Users/paul/arquillian-demo/src/main/java/demo/MySimpleBean.java</code></pre>
          <p>プロジェクトはセットアップされました。テストの時間です！</p>
          <h3 id="&#12473;&#12479;&#12540;&#12488;">スタート</h3>
          <p>すでに <a href="../getting_started">general getting started guide</a> で見ているかもしれませんが、Arquillianのセットアップは簡単です。pom.xmlにArquillianで使う新しいコンテナを設定するのは、たくさんのコピー／ペースト作業です。Forgeでやれば、一つのコマンドです！</p>
          <p>まず、Arquillianプラグインをインストールします。</p>
          <pre class="command"><code class="command">$ forge install-plugin arquillian</code></pre>
          <p>次に、Arquillianとコンテナ設定をセットアップします。最初はJBoss AS7にしてみましょう。</p>
          <pre class="command"><code class="command">$ arquillian setup --container JBOSS_AS_7_MANAGED</code></pre>
          <p>ForgeはどのバージョンのJUnitやArquillian、JBoss AS7を使用するか、聞いてきます。それぞれ、最新のfinalバージョンを使ってください。Forgeはもしユーザーがまだダウンロードしていなければ、JBoss AS7のダウンロードまでも行います。</p>
          <p>これだけです！Arquillianの設定は終わりました。作成したプロジェクトのpom.xmlを確認すると、dependenciesとprofileが追加されていることが見て取れます。同じくForgeはarquillian.xmlファイルをsrc/test/resourcesに作成します</p>
          <h3 id="&#12486;&#12473;&#12488;&#12434;&#26360;&#12367;">テストを書く</h3>
          <p>では、テストを書きましょう。繰り返しますが、Forgeを使えば素早くスタートできます。</p>
          <pre class="command"><code class="command">$ arquillian create-test --class demo.MySimpleBean.java</code></pre>
          <pre class="output"><code class="output">Picked up type &lt;JavaResource&gt;: demo.MySimpleBeanTest&#x000A;Wrote /Users/paul/arquillian-demo/src/test/java/demo/MySimpleBeanTest.java</code></pre>
          <p>デプロイメントとテストメソッドを持った新しいテストクラスが追加されました。これはCDIを使って、テスト対象クラスをインジェクトするので、このテストが本当にコンテナ内で実行されるか確認しましょう。もし、IDEでインポートできなければ、前に作成したMavenのプロファイルを有効にしてください。これでIDEや、直接Mavenで、あるいはForgeからテストを実行できます。</p>
          <pre class="command"><code class="command">$ build --profile arq-jbossas-7-managed</code></pre>
          <p><strong>おめでとう！</strong> ArquillianとForgeを使った最初の <strong class="greenbar">グリーンバー</strong> が表示されました！</p>
          <p>ではJPAコードのテストを試してみましょう。</p>
          <h3 id="&#27704;&#32154;&#21270;&#12398;&#12486;&#12473;&#12488;">永続化のテスト</h3>
          <p>Java Persistence API (JPA)を使ったテストを書き始める前に、JPAの設定が必要です。それから、エンティティとシンプルなデータ・アクセス・オブジェクトを作ります。これらはテスト対象のクラスです。</p>
          <pre class="command"><code class="command">$ persistence setup --provider HIBERNATE --container JBOSS_AS7</code></pre>
          <pre class="output"><code class="output">***SUCCESS*** Installed [forge.spec.jpa] successfully.&#x000A;***INFO*** Setting transaction-type="JTA"&#x000A;***INFO*** Using example data source [java:jboss/datasources/ExampleDS]&#x000A;Warning:  The encoding 'UTF-8' is not supported by the Java runtime.&#x000A; ? The JPA provider [HIBERNATE], also supplies extended APIs. Install these as well? [y/N]  [false] &#x000A;Wrote /Users/paul/arquillian-demo/pom.xml&#x000A;Wrote /Users/paul/arquillian-demo/src/main/resources/META-INF/persistence.xml</code></pre>
          <p>では、エンティティを作成します。</p>
          <pre class="command"><code class="command">$ entity --named Language --package demo.entities</code></pre>
          <pre class="output"><code class="output">Created @Entity [demo.entities.Language]&#x000A;Picked up type &lt;JavaResource&gt;: demo.entities.Language&#x000A;Wrote /Users/paul/arquillian-demo/src/main/java/demo/entities/Language.java</code></pre>
          <p>そして、エンティティにフィールドを追加します。</p>
          <pre class="command"><code class="command">$ field string --named name</code></pre>
          <pre class="output"><code class="output">Added field to demo.entities.Language: @Column private String name;&#x000A;Wrote /Users/paul/arquillian-demo/src/main/java/demo/entities/Language.java</code></pre>
          <p>次のファイルをあなたのプロジェクトに作成してください。</p>
          <div class="filename">src/main/java/demo/dao/LanguageDao.java</div>
          <pre class="prettify"><code class="prettify">package demo.dao;</code>&#x000A;&#x000A;<code class="prettify">import demo.entities.Language;&#x000A;import javax.annotation.PostConstruct;&#x000A;import javax.ejb.Singleton;&#x000A;import javax.ejb.Startup;&#x000A;import javax.persistence.EntityManager;&#x000A;import javax.persistence.PersistenceContext;&#x000A;import java.util.List;</code>&#x000A;&#x000A;<code class="prettify">@Singleton&#x000A;@Startup&#x000A;public class LanguageDao {&#x000A;    @PersistenceContext&#x000A;    EntityManager em;</code>&#x000A;&#x000A;<code class="prettify">    public List&lt;Language&gt; listLanguages() {&#x000A;        return em.createQuery("select l from Language l").getResultList();&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @PostConstruct&#x000A;    public void insertTestData() {&#x000A;        Language java = new Language();&#x000A;        java.setName("Java");&#x000A;        em.persist(java);</code>&#x000A;&#x000A;<code class="prettify">        Language ruby = new Language();&#x000A;        ruby.setName("Ruby");&#x000A;        em.persist(ruby);</code>&#x000A;&#x000A;<code class="prettify">        Language groovy = new Language();&#x000A;        groovy.setName("Groovy");&#x000A;        em.persist(groovy);&#x000A;    }&#x000A;}</code></pre>
          <p>さて、テストクラスを作るときです。このチュートリアルの前半を実行していれば、次のコマンドは見慣れたものでしょう。</p>
          <pre class="command"><code class="command">$ arquillian create-test --class demo.dao.LanguageDao.java --enableJPA</code></pre>
          <pre class="output"><code class="output">Picked up type &lt;JavaResource&gt;: demo.dao.LanguageDemoTest&#x000A;Wrote /Users/paul/arquillian-demo/src/test/java/demo/dao/LanguageDemoTest.java</code></pre>
          <p>ここでまた、新しいテストを作成し、persistence.xmlをデプロイメントに追加します。IDEでこのテストを開き、 <code>Language</code> エンティティをデプロイメントに追加します。</p>
          <p>テストアサーションを記述します：</p>
          <div class="filename">src/test/java/demo/dao/LanguageDaoTest.java</div>
          <pre class="prettify"><code class="prettify">@Test&#x000A;public void testListLanguages() {&#x000A;	Assert.assertEquals(3, languagedao.listLanguages().size());&#x000A;}</code></pre>
          <p><strong>おめでとう！</strong> Arquillianを使った二つ目の <strong class="greenbar">グリーンバー</strong> です！</p>
          <h3 id="&#21029;&#12467;&#12531;&#12486;&#12490;&#12398;&#36861;&#21152;">別コンテナの追加</h3>
          <p>コンテナを追加するのは、セットアップコマンドをまた実行するだけで、簡単です。例えば、Glassfishを追加します。</p>
          <pre class="command"><code class="command">$ arquillian setup --container GLASSFISH_3_1_REMOTE</code></pre>
          <p>Mavenプロファイルを変えると、コンテナが切り替わります。例えばForgeでは：</p>
          <pre class="command"><code class="command">$ build test --profile glassfish-remote-3</code></pre>
          <h3 id="&#12487;&#12503;&#12525;&#12452;&#12513;&#12531;&#12488;&#12497;&#12483;&#12465;&#12540;&#12472;&#12398;&#12456;&#12463;&#12473;&#12509;&#12540;&#12488;">デプロイメントパッケージのエクスポート</h3>
          <p>ファイルにエクスポートすると、デバッグにとても便利です。Forgeでは、以下のように行います。</p>
          <p>まず、Arquillianテストに移動します：</p>
          <pre class="command"><code class="command">$ cd src/test/java/demo/MySimpleBeanTest.java</code></pre>
          <p>デプロイメントをエクスポートします：</p>
          <pre class="command"><code class="command">$ arquillian export</code></pre>
          <p>アーカイブはプロジェクトのtargetディレクトリにエクスポートされています。</p>
          <h3 id="share">Share the Knowledge</h3>
          <p>Find this guide useful?</p>
          <p class="post_to_twitter"><a href="http://twitter.com/home/?status=Just%20read%20the%20%23Arquillian%20Get%20Started%20Faster%20with%20Forge%20guide%20and%20got%20a%20%23greenbar!%20Get%20yours.%20http://arquillian.org/guides/get_started_faster_with_forge_ja"><img src="/images/post_to_twitter.png" alt="" /></a></p>
          <div class="g-plusone" data-size="tall"></div>
          <p>There&#8217;s a lot more about Arquillian to cover. If you&#8217;re ready to learn more, check out the <a href="/guides">other available guides</a>.</p>
          <h4>Feedback</h4>
          <p>Find a bug in the guide? Something missing? You can fix it by <a href="http://github.com/arquillian/arquillian.github.com">forking this website</a>, making the correction and <a href="http://help.github.com/send-pull-requests">sending a pull request</a>. If you&#8217;re just plain stuck, feel free to ask a question in the <a href="http://community.jboss.org/en/arquillian?view=discussions">user discussion forum</a>.</p>
          <h4>Changelog</h4>
          <ul>
            <li>
              Feb 10, 2012:
              Identify authors &amp; translators by site identity
              <em>by Dan Allen</em>
            </li>
            <li>
              Jan 30, 2012:
              Add translator field to metadata
              <em>by Dan Allen</em>
            </li>
            <li>
              Jan 29, 2012:
              Add translator as author
              <em>by Takayuki Konishi</em>
            </li>
            <li>
              Jan 10, 2012:
              Japanese translation
              <em>by Takayuki Konishi</em>
            </li>
          </ul>
        </div>
        <div id="sidebar">
          <div id="toc">
            <h3 class="chapter_header">Chapters</h3>
            <ol class="chapters">
              <li>
                <a href="#&#21069;&#25552;" id="前提_link">
                  前提
                </a>
              </li>
              <li>
                <a href="#&#12503;&#12525;&#12472;&#12455;&#12463;&#12488;&#12434;&#20316;&#25104;&#12377;&#12427;" id="プロジェクトを作成する_link">
                  プロジェクトを作成する
                </a>
              </li>
              <li>
                <a href="#&#12473;&#12479;&#12540;&#12488;" id="スタート_link">
                  スタート
                </a>
              </li>
              <li>
                <a href="#&#12486;&#12473;&#12488;&#12434;&#26360;&#12367;" id="テストを書く_link">
                  テストを書く
                </a>
              </li>
              <li>
                <a href="#&#27704;&#32154;&#21270;&#12398;&#12486;&#12473;&#12488;" id="永続化のテスト_link">
                  永続化のテスト
                </a>
              </li>
              <li>
                <a href="#&#21029;&#12467;&#12531;&#12486;&#12490;&#12398;&#36861;&#21152;" id="別コンテナの追加_link">
                  別コンテナの追加
                </a>
              </li>
              <li>
                <a href="#&#12487;&#12503;&#12525;&#12452;&#12513;&#12531;&#12488;&#12497;&#12483;&#12465;&#12540;&#12472;&#12398;&#12456;&#12463;&#12473;&#12509;&#12540;&#12488;" id="デプロイメントパッケージのエクスポート_link">
                  デプロイメントパッケージのエクスポート
                </a>
              </li>
              <li>
                <a href="#share" id="share_link">
                  Share the Knowledge
                </a>
              </li>
            </ol>
          </div>
        </div>
        <script type="text/javascript">
          //<![CDATA[
            $(window).load(function() {
              var $toc = $('#toc');
              $toc.localScroll({hash: true});
              var sections = [ '前提','プロジェクトを作成する','スタート','テストを書く','永続化のテスト','別コンテナの追加','デプロイメントパッケージのエクスポート','share' ];
              var currentSection = false;
              var sectionOffsets = {};
              $.each(sections, function(idx, section) {
                sectionOffsets[section] = $('#' + section).position().top;
              });
              
              var tocMetrics = {
                top: $toc.position().top,
                height: $toc.outerHeight()
              };
              var bottomBumper = $('#guide').outerHeight() + $('#guide').offset().top - 25;
              // for some reason, #toc a:first isn't working here
              var linkColor = $('#toc a').first().css('color');
            
              var updateToc = function() {
                var scrollY = $(window).scrollTop();
                positionToc(scrollY);
                highlightSectionInToc(scrollY);
              }
            
              var positionToc = function(scrollY) {
                // if scrolled past toc, move it down
                if (scrollY > tocMetrics.top) {
                  if ($toc.css('position') != 'fixed') {
                    $toc.css('position', 'fixed');
                  }
                  var remainingHeight = bottomBumper - scrollY;
                  // keep toc from overrunning bottom of content
                  if (remainingHeight < tocMetrics.height) {
                    $toc.css('top', 0 - (tocMetrics.height - remainingHeight));
                  }
                  else {
                    $toc.css('top', 5);
                  }
                }
                else {
                  if ($toc.css('position') != 'static') {
                    $toc.css({position: 'static', top: 0});
                  }
                }
              };
            
              var highlightSectionInToc = function(scrollY) {
                var numSections = sections.length;
                if (numSections == 0) {
                  return;
                }
            
                // if scrolled above first section, unhighlight any
                if (scrollY < sectionOffsets[sections[0]]) {
                  toggleSelection(false);
                }
                // if last section is in view, highlight it
                // tweak to get last section to be highlighted in toc when scrolled to bottom of page
                //else if (scrollY + $(window).height() > sectionOffsets[sections[numSections - 1]] &&
                //    scrollY - 100 > sectionOffsets[sections[numSections - 2]]) {
                //  toggleSelection(sections[numSections - 1]);
                //}
                else if (scrollY + $(window).height() == $(document).height()) {
                  toggleSelection(sections[numSections - 1]);
                }
                // highlight visible section
                else {
                  $.each(sections, function(idx, section) {
                    if (scrollY > sectionOffsets[section] && (idx == numSections - 1 || scrollY < sectionOffsets[sections[idx + 1]])) {
                      toggleSelection(section);
                    }
                  });
                }
              }
            
              var toggleSelection = function(section) {
                if (!section || section != currentSection) {
                  if (currentSection) {
                    $('#' + currentSection + '_link').css({fontWeight: 'normal', color: linkColor});
                  }
                  currentSection = section;
                  if (section) {
                    $('#' + section + '_link').css({fontWeight: 'bold', color: '#333333'});
                  }
                }
              }
            
              updateToc();
              $(window).scroll(updateToc);
            });
          //]]>
        </script>
      </div>
    </div>
    <footer>
      <div class="container">
        <div class="project">
          <img src="/images/arquillian_logo_200px.png" />
          <p class="bottom">
            &#169;
            Copyright 2012 Red Hat, Inc.
            <br />
            <i class="icon icon-fire"></i>
            Baked by <a href="http://awestruct.org">Awestruct</a>.
            <br />
            <i class="icon icon-share-alt"></i>
            Licensed under the <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY-SA 3.0</a>.
            <br />
            Arquillian released under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>.
          </p>
        </div>
        <div class="footer-nav">
          <h4>Learn</h4>
          <ul>
            <li>
              <a href="/invasion">Mission</a>
            </li>
            <li>
              <a href="/features">Features</a>
            </li>
            <li>
              <a href="/guides">Guides</a>
            </li>
            <li>
              <a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Manual</a>
            </li>
          </ul>
        </div>
        <div class="footer-nav">
          <h4>Get Involved</h4>
          <ul>
            <li>
              <a href="http://community.jboss.org/en/arquillian?view=discussions">Forums</a>
            </li>
            <li>
              <a href="https://issues.jboss.org/browse/ARQ">Issue Tracker</a>
            </li>
            <li>
              <a href="http://github.com/arquillian">Source Code</a>
            </li>
            <li>
              <a href="/community/contributors">Contributors</a>
            </li>
          </ul>
        </div>
        <div class="sponser">
          <div class="follow-us">
            <h4>Stay Informed</h4>
            <ul>
              <li>
                <a href="https://plus.google.com/100660127586085393031"><img alt="Google+" src="/images/gplus-icon.png" /></a>
                <a href="https://twitter.com/#!/search/%23arquillian"><img alt="Twitter" src="/images/tw-icon.png" /></a>
                <a href="http://www.linkedin.com/groups?gid=3120340"><img alt="LinkedIn" src="/images/in-icon.png" /></a>
                <a href="http://vimeo.com/channels/arquillian"><img alt="Vimeo" src="/images/vimeo-icon.png" /></a>
              </li>
            </ul>
          </div>
          <p>This website is open source! Please help us by <a href="http://github.com/arquillian/arquillian.github.com">forking the project</a> and hacking on it.</p>
          <p><a href="http://jboss.org"><img src="/images/jboss_redhat_branding.png" class="branding" title="Red Hat, Inc." alt="Red Hat, Inc." /></a></p>
          <p class="bottom">Arquillian is a <a href="http://jboss.org">JBoss Community</a> project and development is sponsored by Red Hat, Inc.</p>
        </div>
      </div>
    </footer>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-18727998-3");
    pageTracker._trackPageview();
    } catch(err) {}</script>
    <script src="//twitter.github.com/bootstrap/assets/js/bootstrap-collapse.js"></script>
    <script src="/javascripts/prettify.js"></script>
    <script type="text/javascript">
      //<![CDATA[
        $(function() {
          prettify();
          // stick footer to bottom
          // TODO this needs to get run again when the window size changes
          //$('#main').css('min-height', $(window).height() - $('#footer').outerHeight() - parseInt($('#main').css('margin-top')));
        });
      //]]>
    </script>
  </body>
</html>
